function uniqid(a,b){"undefined"==typeof a&&(a="");var c,d=function(a,b){return a=parseInt(a,10).toString(16),b<a.length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,c=a,c+=d(parseInt((new Date).getTime()/1e3,10),8),c+=d(this.php_js.uniqidSeed,5),b&&(c+=(10*Math.random()).toFixed(8).toString()),c}function trim(a,b){var c=[" ","\n","\r","\t","\f","\x0B"," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029","　"].join(""),d=0,e=0;for(a+="",b&&(c=(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"$1")),d=a.length,e=0;e<d;e++)if(c.indexOf(a.charAt(e))===-1){a=a.substring(e);break}for(d=a.length,e=d-1;e>=0;e--)if(c.indexOf(a.charAt(e))===-1){a=a.substring(0,e+1);break}return c.indexOf(a.charAt(0))===-1?a:""}function ltrim(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"$1"):" \\s ";var c=new RegExp("^["+b+"]+","g");return(a+"").replace(c,"")}function rtrim(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"\\$1"):" \\s ";var c=new RegExp("["+b+"]+$","g");return(a+"").replace(c,"")}!function(a,b,c){a.jstack=function(){var a=function(){};return a}()}(window,$js,jQuery),jstack.hasOwnProperty2=function(a,b){var c=a[b];return c!==Object[b]&&c!==Object.__proto__[b]&&c!==Array[b]&&c!==Array.__proto__[b]},jstack.url=function(){var Url=function(){},recursiveArrayToObject=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(a[c]instanceof Array?b[c]=recursiveArrayToObject(a[c]):b[c]=a[c]);return b};return Url.prototype.params=new Array,Url.prototype.getQuery=function(a){var b=a,c=b.indexOf("?");return c==-1?"":(b=b.substr(c+1,b.length),c=b.indexOf("#"),c==-1?b:b.substr(0,c))},Url.prototype.getPath=function(a){var b=a.indexOf("?");return b==-1?a:a.substr(0,b)},Url.prototype.buildParamFromString=function(param){var p=decodeURIComponent(param),strpos=p.indexOf("=");if(strpos==-1)return""!==p&&(this.params[p]="",this.params.length++),!0;var name=p.substr(0,strpos),value=p.substr(strpos+1,p.length),openBracket=name.indexOf("["),closeBracket=name.indexOf("]");if(openBracket==-1||closeBracket==-1)return openBracket==-1&&closeBracket==-1||(name=name.replace(new RegExp("[\\[\\]]"),"_")),this.params[name]=value,!0;var matches=name.match(new RegExp("\\[.*?\\]","g"));name=name.substr(0,openBracket),p="this.params";var key=name;for(var i in matches)matches.hasOwnProperty(i)&&(p+="['"+key+"']",void 0!=eval(p)&&"object"==typeof eval(p)||eval(p+"= new Array();"),key=matches[i].substr(1,matches[i].length-2),""==key&&(key=eval(p).length));p+="['"+key+"']",eval(p+"= '"+value+"';")},Url.prototype.parseQuery=function(a){var b=a;b=b.replace(new RegExp("&"),"&"),this.params=new Array,this.params.length=0,b=b.split("&");for(var c=0;c<b.length;c++)this.buildParamFromString(b[c]);return recursiveArrayToObject(this.params)},Url.prototype.buildStringFromParam=function(a,b){var c="",d="";if(void 0!=b&&(c=b),"object"==typeof a)for(var e in a)d=a[e],e=""==c?e:"["+e+"]","object"==typeof d?this.buildStringFromParam(d,c+e):this.params[this.params.length]=c+e+"="+d},Url.prototype.buildQuery=function(a){return this.params=new Array,this.buildStringFromParam(a),this.params.join("&")},Url.prototype.getParams=function(a){return this.parseQuery(this.getQuery(a))},Url.prototype.getParamsFromHash=function(){return this.getParams(document.location.hash)},new Url}(),jstack.route=function(a,b){var c=[],d={},e=function(a,b){this.name=b,this.path=a,this.keys=[],this.fns=[],this.params={},this.regex=f(this.path,this.keys,!1,!1)};e.prototype.addHandler=function(a){this.fns.push(a)},e.prototype.removeHandler=function(a){for(var b=0,c=this.fns.length;b<c;b++){var d=this.fns[b];if(a==d)return void this.fns.splice(b,1)}},e.prototype.run=function(a){for(var b=0,c=this.fns.length;b<c;b++)this.fns[b].apply(this,a)},e.prototype.match=function(a,b){var c=this.regex.exec(a);if(!c)return!1;for(var d=1,e=c.length;d<e;++d){var f=this.keys[d-1],g="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];f&&(this.params[f.name]=g),b.push(g)}return!0},e.prototype.toURL=function(a){var b=this.path;for(var c in a)b=b.replace("/:"+c,"/"+a[c]);if(b=b.replace(/\/:.*\?/g,"/").replace(/\?/g,""),b.indexOf(":")!=-1)throw new Error("missing parameters for url: "+b);return b};var f=function(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))},g=function(a,b){var f=a.split(" "),g=2==f.length?f[0]:null;a=2==f.length?f[1]:f[0],d[a]||(d[a]=new e(a,g),c.push(d[a])),d[a].addHandler(b)},h=function(a,c,d){if("function"==typeof c)g(a,c),h.reload();else if("object"==typeof a){for(var e in a)g(e,a[e]);h.reload()}else if("undefined"==typeof c)h.navigate(a);else if("object"==typeof c){var f={};d&&$.extend(f,v()),$.extend(f,b.getParams(a),c);var i=b.buildQuery(f);i&&(i="?"+i),a=b.getPath(a),h.navigate(a+i)}};h.lookup=function(a,b){for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f.name==a)return f.toURL(b)}},h.remove=function(a,b){var c=d[a];c&&c.removeHandler(b)},h.removeAll=function(){d={},c=[]},h.navigate=function(b,c){c=c||{};var d=c.silent||!1;d&&s(),setTimeout(function(){a.location.hash=b,d&&setTimeout(function(){r()},1)},1)};var i=function(){var b="",c=a.location.hash.substring(1),d=c.indexOf("#");return d!==-1&&(b=c.substr(d+1)),b},j=function(){var b=a.location.hash.substring(1),c=b.indexOf("#");return c!==-1&&(b=b.substr(0,c)),b},k=function(a,b){var c=[];return!!b.match(a,c)&&(b.run(c),!0)},l=function(a){for(var b=0,d=c.length;b<d;b++){var e=c[b];if(k(a,e))return}};h.load=l;var m,n=function(){var a=j();return a!=m?(m=a,$(window).trigger("mainHashchange"),l(m)):void $(window).trigger("subHashchange")};h.reload=n;var o=function(b){var c=$(this),d=c.attr("href");if(d)return"/"+d==a.location.pathname?(b.preventDefault(),jstack.route(""),!1):void("##"==d.substr(0,2)&&(b.preventDefault(),q(d.substr(2))))},p=function(b){var c=b+"#"+i();a.location.hash=c},q=function(b){var c=m+"#"+b;a.location.hash=c},r=function(){a.addEventListener?a.addEventListener("hashchange",n,!1):a.attachEvent("onhashchange",n),$(document).on("click","a",o)},s=function(){a.removeEventListener?a.removeEventListener("hashchange",n):a.detachEvent("onhashchange",n),$(document).off("click","a",o)};h.start=r,h.stop=s;var t=function(){return b.getQuery(j())},u=function(){return b.getPath(j())},v=function(){return b.getParams(j())},w=function(a){return v()[a]},x=function(){return b.getParams("?"+i())},y=function(a){return x()[a]};h.getHash=j,h.getHash2=i,h.getParams=v,h.getParam=w,h.getSubParams=x,h.getSubParam=y,h.getQuery=t,h.getPath=u,h.setMainHash=p,h.setSubHash=q;var z=document.getElementsByTagName("base")[0];if(z)h.baseHref=z.href;else{var A=window.location,B=A.pathname;B=B.split("/"),B.pop(),B=B.join("/")||"/";var C,D=A.username?A.username+(A.password?":"+A.password:"")+"@":"";C=A.port&&("https"==A.protocol&&"443"!=A.port||"80"!=A.port)?":"+A.port:"",h.baseHref=A.protocol+"//"+D+A.host+C+B}var E=a.location.href;E=E.split("/"),E=E[0]+"//"+E[2],E=h.baseHref.substr(E.length),h.basePath=E;var F=a.location.href.substr(h.baseHref.length),G=F.indexOf("#");return G>-1&&(F=F.substr(0,G)),h.baseLocation=F,h}(window,jstack.url),function(w,j){j.templateVarSubstitutions={};var separatorStart="<%",separatorEnd="%>",separatorStartE="<%",separatorEndE="%>",cache={},reg1=eval("/'(?=[^"+separatorEndE+"]*"+separatorEndE+")/g"),reg2=eval("/"+separatorStartE+"=(.+?)"+separatorEndE+"/g");j.template=function(a,b,c,d){var e;if(c&&cache[c])e=cache[c];else{var f=j.templateVarSubstitutions;a=a.html();for(var g in f)f.hasOwnProperty(g)&&(a=a.replace(new RegExp(g,"g"),separatorStart+f[g]+separatorEnd));var h=d?"console.log(tmplException.message);":"",i="var tmplString=''; with(tmplObj){ tmplString += '"+a.replace(/[\r\t\n]/g," ").replace(reg1,"\t").split("'").join("\\'").split("\t").join("'").replace(reg2,"'; try{ tmplString += $1 }catch(tmplException){ "+h+" }; tmplString += '").split(separatorStart).join("';").split(separatorEnd).join("tmplString += '")+"';} return tmplString;";try{e=new Function("tmplObj",i),c&&(cache[c]=e)}catch(k){d&&(console.log(k),console.log(i),console.log(a))}}return b?e(b):e}}(window,jstack),function(a,b){var c={};b.controller=function(a){for(var b,d,e=!0,f=0;f<arguments.length;f++)switch(typeof arguments[f]){case"boolean":d=arguments[f];break;case"function":b=arguments[f];break;case"object":e=arguments[f]}if(e instanceof Array&&$js.require(e,d),b){var g=function(){return b.apply(g,arguments)};g.jstack={},c[a]=g}return c[a]}}(window,jstack),function(a,b,c){var d={};b.directive=function(a,b){return b&&(d[a]=b),d[a]},b.directiveCompileLoaded=function(a){return a.find("*").each(function(){var a=c(this);c.each(this.attributes,function(){var b=this.name;"j-loaded-"==b.substr(0,9)&&(a.attr(b.substr(9),this.value),a.removeAttr(b))})}),a},b.directiveCompile=function(a,b){var e=[];return c.each(d,function(d,f){a.find("[j-"+d+"],"+d+"[j]").each(function(){var a=this.tagName==d.toUpperCase(),g=c(this),h=a?g.attr("j"):g.attr("j-"+d),i=f(h,g,b);i&&e.push(i),a?(g.removeAttr("j"),i?i.then(function(){g.replaceWith(g.html())}):g.replaceWith(g.html())):g.removeAttr("j-"+d)})}),e},c.fn.jmlInject=function(a,d){return this.each(function(){var e=c(this),f=uniqid("tmpl");b.templateVarSubstitutions[f]=d,e[a](f)})}}(window,jstack,jQuery),function(a,b){b.directive("if",function(a,b){b.jmlInject("before","if("+a+"){"),b.jmlInject("after","}")}),b.directive("foreach",function(a,b){var c;a.indexOf(" as ")!==-1?(c=a.split(" as "),b.jmlInject("before","$.each("+c[0]+", function(i,"+c[1]+"){")):(c=a.split(" in "),b.jmlInject("before","$.each("+c[1]+", function("+c[0]+"){")),b.jmlInject("after","});")}),b.directive("href",function(a,c){href=b.route.baseLocation+"#"+a,c.attr("href",href)}),b.directive("src",function(a,b){b.attr("j-loaded-src",a)}),b.directive("include",function(a,b,c){var d=a.split(".").pop(),e=c+a;"jml"!=d&&(e+=".jml");var f=$.Deferred();return jstack.getTemplate(e).then(function(a){var d=$("<tmpl>"+a+"</tmpl>");$.when.apply($,jstack.directiveCompile(d,c)).then(function(){b.html(d.contents()),f.resolve()})}),f}),b.directive("extend",function(a,b,c){var d=c+a,e=a.split(".").pop();"jml"!=e&&"xjml"!=e&&(d+=".xjml");var f=$.Deferred();return jstack.getTemplate(d).then(function(a){var d=$("<tmpl>"+a+"</tmpl>");$.when.apply($,jstack.directiveCompile(d,c)).then(function(){b.find(">*").each(function(){var a=$(this),b=a.attr("selector");b||(b=a.attr("j"));var c=this.tagName.toLowerCase(),e=a.contents(),f=d.find(b);e.length?f[c](a.contents()):f[c]()}),b.replaceWith(d.contents()),f.resolve()})}),f})}(window,jstack),function(a,b){var c={},d={};b.getTemplate=function(a){if(!d[a]){if($js.dev){var e=(new Date).getTime().toString(),f=a;f.indexOf("_t=")===-1&&(f+=(f.indexOf("?")<0?"?":"&")+"_t="+e)}d[a]=$.Deferred(),$.ajax({url:f,cache:!0,success:function(e){for(var f={},g="",h=e.split("<%"),i=0,j=h.length;i<j;i++)if(i)for(var k=h[i].split("%>"),l=0,m=k.length;l<m;l++)if(l%2)g+=k[l];else{var n=uniqid("tmpl");g+=n,f[n]=k[l]}else g+=h[i];$.extend(b.templateVarSubstitutions,f),c[a]=g,d[a].resolve(c[a])}})}return d[a]}}(window,jstack),jstack.processTemplate=function(a,b,c,d){"undefined"==typeof d&&(d=$js.dev);var e=$.Deferred();return $.when.apply($,jstack.directiveCompile(a,c)).then(function(){var c=function(c){return jstack.directiveCompileLoaded($("<tmpl>"+jstack.template(a,c,b,d)+"</tmpl>")).contents()};e.resolve(c)}),e},jstack.dataBinder=function(){var a=function(){};a.prototype={dotGet:function(a,b){return a.split(".").reduce(function(a,b){return a[b]},b)},dotSet:function(a,b,c){a.split(".").reduce(function(a,b,d,e){return e.length==d+1&&(a[b]=c),a[b]},b)},getKey:function(a){return a.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"")},getScope:function(a){return $(a).parents("[j-scope]").map(function(){return $(this).attr("j-scope")}).get().reverse().join(".")},getScopedInput:function(a){var b=$(a).attr("name"),c=this.getKey(b);return this.getScoped(a,c)},getScoped:function(a,b){var c=this.getScope(a);return c&&(c+="."),c+=b},getters:{SELECT:function(a){return $(a).val()},INPUT:function(a){var b=$(a).prop("type");return"checkbox"==b||"radio"==b?$(a).prop("checked")?$(a).val():null:"file"==b?a.files:"submit"!=b?$(a).val():void 0},TEXTAREA:function(a){return $(a).val()}},defaultGetter:function(a){return $(a).html()},getValue:function(a){var b=a.tagName,c=this.getters[b]||this.defaultGetter;return c(a)},register:function(a,b){var c=this;a.data("j-model",b),a.on("input",":input[name]",function(){var a=($(this).attr("name"),c.getValue(this)),d=c.getScopedInput(this);c.dotSet(d,b,a)}),this.populate(a,b)},populate:function(a,b){var c=this,b=b||a.data("j-model");a.find(":input[name]").each(function(){var a=c.getScopedInput(this),d=c.dotGet(a,b);$(this).populateInput(d)}),a.find("[j-var]").each(function(){var a=$(this),d=a.attr("j-var"),e=c.getScoped(this,d),f=c.dotGet(e,b);a.html(f)})},eventListener:function(){var a=this,b=new MutationObserver(function(b){a.triggerEvent("eventDOMChange",[b])});b.observe(document.body,{subtree:!0,childList:!0,attribute:!1,characterData:!0}),$(document.body).on("input val",":input[name]",function(){a.triggerEvent("eventInputChange",[this])})},timeouts:{},triggerEvent:function(a,b){var c=this;b=b||[];var d=c[a];c.timeouts[a]&&clearTimeout(c.timeouts[a]),c.timeouts[a]=setTimeout(function(){d.apply(c,b)},100)},eventDOMChange:function(a){this.update()},eventInputChange:function(a){this.update()},update:function(){this.updateIf(),this.updateController()},updateController:function(){var a=this;$("[j-controller]").each(function(){var b=$(this);a.populate(b,{preventValEvent:!0})})},updateIf:function(){var a=this;$("[j-if]").each(function(){var b=$(this),c=b.attr("j-if"),d=b.closest.data("j-controller"),e=a.getScoped(this,c),f=a.dotGet(e,d),g=b.data("j-if");g&&(g=b.children(),b.data("j-if",g)),f?(g.appendTo(b),b.trigger("j-if:true")):(g.detach(),b.trigger("j-if:false"))})}};var b=new a;return b.eventListener(),b}(),jstack.loadView=function(){return function(a){var b=$("<tmpl>"+a.templateHtml+"</tmpl>");b.find("> *").length||b.wrapInner("<div />");var c=b.find("[j-controller]"),d={};c.length||(b.children(0).attr("j-controller",a.path||""),c=b.find("[j-controller]"));var e=0,f=c.length,g=[];a.defaultController||(a.defaultController=function(a){jstack.controller(a,function(){this.jstack.render()})}),c.each(function(){var c=$(this),h=c.attr("j-controller"),i=(h.replace("/","."),a.templatePath+"#"+h),j=a.templatePath.split("/");j.pop(),j=j.join("/"),j&&(j+="/");var k=jstack.processTemplate(c,i,j).then(function(a){d[h]=function(b){var d=a(b);c.html(d),jstack.dataBinder.register(c,b)}}),l=$.Deferred(),m=function(){var b=jstack.controller(h);return b||console.log('jstack controller "'+h+'" not found as expected (or parse error) in "'+a.controllersPath+h+'"'),b.jstack.render=function(a){a||(a={}),b.jstack.data=a;d[h](b.jstack.data);return g.push([c,b]),l.resolve(),a},b.jstack.element=c,b},n=$.Deferred(),o=$.Deferred();$.when(n,o).then(function(){var c=m();e++,e==f&&$.when(l).then(function(){$("[j-view]").html(b.contents()),a.renderCallback&&$.each(g,function(b,c){a.renderCallback.apply(a,c)})}),c()}),k.then(function(){o.resolve()}),$js.onExists(a.controllersPath+h,function(){n.resolve()},function(){a.defaultController(h),n.resolve()})})}}(),function(a,b){var c=function(b){for(var c=[],d=a.param(b).split("&"),e=0;e<d.length;e++){var f=d[e].split("="),g=null!==f[1]?decodeURIComponent(f[1]):"";c.push([decodeURIComponent(f[0]),g])}return c},d=function(b,c,e,f){e||(e="");for(var g in b)if(b.hasOwnProperty(g)){var h=e+g,i=b[g];if(i instanceof FileList){if(1==i.length)c[h]=i[0];else{c[h]=[];for(var j=0;j<i.length;j++)c[h].push(i[j])}delete b[g]}else i instanceof a?b[g]=i.jsonml():i instanceof HTMLCollection||i instanceof HTMLElement?b[g]=a(i).jsonml():"object"==typeof i&&d(i,c,h+"_",f+1)}},e=function(a){for(var b in a)jstack.hasOwnProperty2(a,b)&&("undefined"==typeof a[b]||null===a[b]?a[b]="":"object"==typeof a[b]&&(a[b]=e(a[b])));return a};b.ajax=function(){var b,f={};if(2==arguments.length?(b=arguments[1]||{},b.url=arguments[0]):b=arguments[0],b.data&&d(b.data,f),!a.isEmptyObject(f)){for(var g,h=new FormData,i=c(b.data),j=0;j<i.length;j++)h.append(i[j][0],i[j][1]);for(var k in f)if(f.hasOwnProperty(k)){var l=f[k];if(l instanceof Array)for(var j=0;j<l.length;j++)"undefined"!=typeof l[j]&&(h.append(k+"[]",l[j]),g=!0);else"undefined"!=typeof l&&(h.append(k,l),g=!0)}g&&(b.type="POST",b.processData=!1,b.contentType=!1,b.data=h)}return b.data=e(b.data),a.ajax(b)},b.post=function(a,c,d,e){return b.ajax({type:"POST",url:a,data:c,success:d,dataType:e})}}(jQuery,jstack),jstack.paramsReflection=function(f){var args=f.toString().match(/^\s*function\s+(?:\w*\s*)?\((.*?)\)\s*{/),r={};if(args&&args[1]){args=args[1],args=args.replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,""),args=args.trim().split(/\s*,\s*/);for(var i=0;i<args.length;i++){var arg=args[i],idf=arg.indexOf("=");idf===-1?r[arg]=void 0:r[arg.substr(0,idf)]=eval(arg.substr(idf+1).trim())}}return r},function(a){var b=function(b,c,d){var e={},f=c.attributes,g=d+"-",h=g.length;for(var i in f)if(f.hasOwnProperty(i)){var j=f[i];j.name&&j.name.substr(0,h)==g&&(e[j.name.substr(h).toCamelCase()]=j.value)}c.$js=e;var k=function(){var d,f=$js.module(b),g=[];if(f instanceof Array){var h=f;f=h.pop(),d={};for(var i in h)h.hasOwnProperty(i)&&(d[h[i]]=null)}else d=a.paramsReflection(f);for(var i in d)d.hasOwnProperty(i)&&("$di"==i?g.push(e):"undefined"!=typeof e[i]?g.push(e[i]):g.push(d[i]));f.apply(c,g)};$js.module(b)?k():$js.waitingModule[b]?$js.waitingModule[b](k):$js(b,k)};a.moduleDomNs="js",a.moduleDomPath="js/js-module-dom/",a.moduleDom=function(c,d){c||(c=a.moduleDomPath),d||(d=a.moduleDomNs);for(var e=document.getElementsByTagName("*"),f=0;f<e.length;f++)if(!e[f].$js){var g=e[f].getAttribute(d);g&&b(c+g,e[f],d)}}}(jstack),jstack.replaceAllRegExp=function(a,b,c){return a.replace(new RegExp(b,"g"),c)},jstack.escapeRegExp=function(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},jstack.replaceAll=function(a,b,c){return b=jstack.escapeRegExp(b),jstack.replaceAllRegExp(a,b,c)},jstack.camelCaseDataToObject=function(a,b,c){var d=a.replace(/([A-Z])/g," $1").toLowerCase().split(" ");"undefined"==typeof c&&(c={});var e=c,f=d.length-1;return $.each(d,function(a,c){a==f?e[c]=b:(e[c]||(e[c]={}),e=e[c])}),c},jstack.jml=function(a,b){b||(b={});var c=a.split("/");c.pop(),c=c.join("/")+"/";var d=a,e=$.Deferred();return jstack.getTemplate(a).then(function(a){var f=$("<tmpl>"+a+"</tmpl>");jstack.processTemplate(f,d,c).then(function(a){e.resolve(a(b))})}),e},function(a){a.jsonml=function(b,c){if("undefined"==typeof c&&(c=document),"string"==typeof b)return a(c.createTextNode(b));if(a.isArray(b)){var d=b.length;if(d>=1&&"string"==typeof b[0]){var e=a(c.createElement(b[0]));if(1==d)return e;var f=1;if(a.isPlainObject(b[1])){if(e.attr(b[1]),2==d)return e;f++}for(var g=e.get(0),h=e.is("script")&&!a.support.scriptEval(),i=a.browser.msie&&e.is("object"),j=f;j<d;j++)try{if(h&&"string"==typeof b[j]){g.text=b[j];continue}var k=a.jsonml(b[j],c);if(i){var l=e.get(0);l.innerHTML=l.innerHTML+k.get(0).outerHTML}else k.appendTo(e)}catch(m){throw"Could not insert "+k.get(0).nodeName+" to "+e.get(0).nodeName+": "+m}return e}}throw"Invalid JsonML format: "+b},a.fn.jsonml=function(){var b=[];if(this.length>1)this.each(function(){b.push(a(this).jsonml())});else{var c=this[0];if(!c)return;b.push(c.tagName.toLowerCase());var d,e={};a.each(c.attributes,function(a,b){e[b.name]=b.value,d=!0}),d&&b.push(e);this.children().each(function(){b.push(a(this).jsonml())})}return b}}(jQuery),String.prototype.trim=function(a){return trim(this,a)},String.prototype.ltrim=function(a){return ltrim(this,a)},String.prototype.rtrim=function(a){return rtrim(this,a)},String.prototype.camelCase=function(){return this.replace(/(\_[a-z])/g,function(a){return a.toUpperCase().replace("_","")})},String.prototype.snakeCase=function(){return this.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()})},String.prototype.camelCaseDash=function(){return this.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})},String.prototype.snakeCaseDash=function(){return this.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},String.prototype.lcfirst=function(){return this.charAt(0).toLowerCase()+this.substr(1)},String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.substr(1)},function(a,b){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("jquery");b(exports,c)}else b(a,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b){function c(a,c){function e(a,b,c){return a[b]=c,a}function f(a,b){for(var c,f=a.match(d.key);void 0!==(c=f.pop());)if(d.push.test(c)){var h=g(a.replace(/\[\]$/,""));b=e([],h,b)}else d.fixed.test(c)?b=e([],c,b):d.named.test(c)&&(b=e({},c,b));return b}function g(a){return void 0===n[a]&&(n[a]=0),n[a]++}function h(a){switch(b('[name="'+a.name+'"]',c).attr("type")){case"checkbox":return"on"===a.value||a.value;default:return a.value}}function i(b){if(!d.validate.test(b.name))return this;var c=f(b.name,h(b));return m=a.extend(!0,m,c),this}function j(b){if(!a.isArray(b))throw new Error("formSerializer.addPairs expects an Array");for(var c=0,d=b.length;c<d;c++)this.addPair(b[c]);return this}function k(){return m}function l(){return JSON.stringify(k())}var m={},n={};this.addPair=i,this.addPairs=j,this.serialize=k,this.serializeJSON=l}var d={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return c.patterns=d,c.serializeObject=function(){return new c(b,this).addPairs(this.serializeArray()).serialize()},c.serializeJSON=function(){return new c(b,this).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof b.fn&&(b.fn.serializeObject=c.serializeObject,b.fn.serializeJSON=c.serializeJSON),a.FormSerializer=c,c}),function(a){a.fn.changeVal=function(b){return a(this).val(b).trigger("change")},a.uniqid=function(){var b;do b=uniqid("uid-");while(a("#"+b).length);return b},a.fn.getId=function(b){var c=this.attr("id");return c&&!b||(c=a.uniqid(),this.attr("id",c)),c},a.fn.serializeAssoc=function(){var b={};return this.each(function(){a.each(a(this).serializeArray(),function(a,c){b[c.name]=c.value})}),b},a.fn.hasVerticalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollHeight>this.innerHeight()},a.fn.hasHorizontalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollWidth>this.innerWidth()},a.fn.attrParams=function(b){b||(b="data");var c={},d=b.length;return this.each(function(){a.each(this.attributes,function(){var e=this.name,f=this.value;e.substr(0,d)==b&&(e=e.substr(d+1),e=e.camelCaseDash(),e=e.lcfirst(),"true"==f?f=!0:"false"==f?f=!1:a.isNumeric(f)&&(f=parseInt(f,10)),c[e]=f)})}),c},a.extend(a.expr[":"],{scrollable:function(b){var c,d;return"scroll"==a(b).css("overflow")||"scroll"==a(b).css("overflowX")||"scroll"==a(b).css("overflowY")||((c=b.clientHeight<b.scrollHeight&&(a.inArray(a(b).css("overflowY"),["scroll","auto"])!=-1||a.inArray(a(b).css("overflow"),["scroll","auto"])!=-1))||(d=b.clientWidth<b.scrollWidth&&(a.inArray(a(b).css("overflowX"),["scroll","auto"])!=-1||a.inArray(a(b).css("overflow"),["scroll","auto"])!=-1)))},parents:function(b,c,d){return a(b).parents(d[3]).length<1}});var b={"nth-level":function(b,c){c=parseInt(c,10);var d=[],e=this;return this.each(function(){c+a(this).parents(b).length;e.find(b).each(function(){a(this).parents(b).length==c-1&&d.push(this)})}),a(d)}};a.fn.findOrig=a.fn.find,a.fn.find=function(c){if("string"==typeof c){var d,e=this;if(a.each(b,function(a,f){var g=c.indexOf(":"+a);if(g!==-1){var h=a.length,i=c.substr(0,g),j=c.substr(g+h+2,c.length-g-h-3);return d=b[a].call(e,i,j),!1}}),d)return d}return this.findOrig(c)},a.fn.childrenHeight=function(b,c,d){var e=bottomOffset=0;"undefined"==typeof b&&(b=!0),"undefined"==typeof c&&(c=!0),"undefined"==typeof d&&(d=!0);var f=this.children();return d&&(f=f.filter(":visible")),f.each(function(d,f){var g=a(f),h=g.offset().top,i=h+(b?g.outerHeight(c):g.height());h<e&&(e=h),i>bottomOffset&&(bottomOffset=i)}),bottomOffset-e-this.offset().top},a.fn.findExclude=function(b,c,d){var e=a([]);return a(this).each(function(f,g){a(g).find(b).each(function(b,f){var h=a(f);d&&(h=h.parent());var i=h.closest(c);i[0]!=g&&i.length||(e=e.add(f))})}),e},a.fn.removeCss=function(b){var c=new RegExp(b+"[^;]+;?","g");return this.each(function(){var b=a(this).attr("style");b&&a(this).attr("style",b.replace(c,""))})},a.fn.removeClassPrefix=function(b){return this.each(function(c,d){var e=d.className.split(" ").filter(function(a){return 0!==a.lastIndexOf(b,0)});d.className=a.trim(e.join(" "))}),this},a.fn.setVal=a.fn.val,a.fn.val=function(){var b=a.fn.setVal.apply(this,arguments);return arguments.length&&this.trigger("val"),b};var c=function(b,c){return"undefined"==typeof c&&(c="suspend"),c&&(b=b.split(" "),a.each(b,function(a,d){b[a]=d+"."+c}),b=b.join(" ")),b};a.fn.suspendEvent=function(a,b){return a=c(a,b),this.on(a,function(a){a.stopPropagation()})},a.fn.resumeEvent=function(a,b){return a=c(a,b),this.off(a)},a.arrayCompare=function(b,c){return 0===a(b).not(c).get().length&&0===a(c).not(b).get().length},a.fn.reverse=function(){return a(this.get().reverse())}}(jQuery),$.fn.populateInput=function(a,b){b=$.extend({addMissing:!1,preventValEvent:!1},b);var c;c=b.preventValEvent?function(a,b){a.setVal(b)}:function(a,b){a.val(b)};var d=function(a,d){var e=!1;return a.hasClass("select2-hidden-accessible")?(c(a,d),void a.trigger("change")):a[0].hasAttribute("data-preselect")?void a.attr("data-preselect",d):($("option",a).each(function(){$(this).val()==d&&($(this).prop("selected",!0),e=!0)}),void(!e&&b.addMissing&&(a.append('<option value="'+d+'" selected="selected">'+d+"</option>"),$(this).prop("selected",!0))))};return this.each(function(){var b=$(this);if(b.is("select"))if(a instanceof Array)for(var e=0,f=a.length;e<f;e++)d(b,a[e]);else d(b,a);else if(b.is("textarea"))c(b,a);else switch(b.attr("type")){case"text":case"hidden":c(b,a);break;case"radio":b.length>=1&&$.each(b,function(b){var c=$(this).attr("value");singleVal=a;c===a?$(this).prop("checked",!0):$(this).prop("checked",!1)});break;case"checkbox":b.length>1?$.each(b,function(b){for(var c,d=$(this).attr("value"),e=void 0,f=0;f<a.length;f++)c=a[f],c===d&&(e=c);e?$(this).prop("checked",!0):$(this).prop("checked",!1)}):1==b.length&&($ctrl=b,a?$ctrl.prop("checked",!0):$ctrl.prop("checked",!1))}})},$.fn.populateForm=function(a,b){b=$.extend({addMissing:!1,not:!1,notContainer:!1},b);var c=this,d=function(a,d){null===d&&(d="");var e=c.find('[name="'+a+'"]');b.addMissing&&!e.length&&c.append('<input type="hidden" name="'+a+'" value="'+d+'">'),e.each(function(){var a=$(this);b.not&&a.is(b.not)||b.notContainer&&a.closest(b.notContainer).length||a.populateInput(d,b)})},e=function(a,b){$.each(b,function(b,c){var f=a+"["+b+"]";"object"==typeof c&&null!=c?e(f,c):d(f,c)})};return $.each(a,function(a,b){"object"==typeof b&&null!=b?e(a,b):d(a,b)}),this},$.fn.populate=function(a,b){return this.each(function(){$(this).is("form")?$(this).populateForm(a,b):$(this).populateInput(a,b)})},function(j,$){var getVal=function(a){var b=a.val();return a.is("input[type=checkbox]")?!!a.prop("checked")&&b:b};$.fn.dataIf=function(options){options=$.extend({closestSelector:"form"},options||{});var uid=uniqid("data-if");return this.each(function(){var self=$(this);self.find("[data-if]").each(function(){var $this=$(this),dataIf=$this.attr("data-if"),match=dataIf.match(/\${\s*[\w\.]+\s*}\$/g);dataIf=dataIf.replace(/\$\{/g,"getVal($this.closest('"+options.closestSelector+"').find('[name=\""),dataIf=dataIf.replace(/\}\$/g,"\"]:eq(0)'))");var showOrHide=function(){var ok=eval(dataIf);ok?($this.show(),$this.attr("data-if-ok","true"),$this.trigger("data-if:show")):($this.hide(),$this.attr("data-if-ok","false"),$this.trigger("data-if:hide"))};match&&$.each(match,function(a,b){var c=b.match(/[\w\.]+/)[0],d=$this.closest(options.closestSelector).find('[name="'+c+'"]:eq(0)');d.data(uid)||(d.data(uid,!0),d.on("input change val",function(a){options.onChange&&options.onChange.call(self),$this.trigger("data-if:change")})),d.on("input change val",function(){showOrHide()})}),showOrHide()}),options.onShow&&self.on("data-if:show","[data-if]",options.onShow),options.onHide&&self.on("data-if:hide","[data-if]",options.onHide)})}}(jstack,jQuery),jstack.json_encode=function(a){var b="undefined"!=typeof window?window:GLOBAL;b.$locutus=b.$locutus||{};var c=b.$locutus;c.php=c.php||{};var d,e=b.JSON;try{if("object"==typeof e&&"function"==typeof e.stringify){if(d=e.stringify(a),void 0===d)throw new SyntaxError("json_encode");return d}var f=a,g=function(a){var b=["\0-","-","­","؀-؄","܏","឴","឵","‌-‏","\u2028- ","⁠-⁯","\ufeff","￰-￿"].join(""),c=new RegExp('[\\"'+b+"]","g"),d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return c.lastIndex=0,c.test(a)?'"'+a.replace(c,function(a){var b=d[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},h=function(a,b){var c="",d="    ",e=0,f="",i="",j=0,k=c,l=[],m=b[a];switch(m&&"object"==typeof m&&"function"==typeof m.toJSON&&(m=m.toJSON(a)),typeof m){case"string":return g(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(c+=d,l=[],"[object Array]"===Object.prototype.toString.apply(m)){for(j=m.length,e=0;e<j;e+=1)l[e]=h(e,m)||"null";return i=0===l.length?"[]":c?"[\n"+c+l.join(",\n"+c)+"\n"+k+"]":"["+l.join(",")+"]",c=k,i}for(f in m)Object.hasOwnProperty.call(m,f)&&(i=h(f,m),i&&l.push(g(f)+(c?": ":":")+i));return i=0===l.length?"{}":c?"{\n"+c+l.join(",\n"+c)+"\n"+k+"}":"{"+l.join(",")+"}",c=k,i;case"undefined":case"function":default:throw new SyntaxError("json_encode")}};return h("",{"":f})}catch(i){if(!(i instanceof SyntaxError))throw new Error("Unexpected error type in json_encode()");return c.php.last_error_json=4,null}},function(a,b,c){"use strict";var d=function(){function e(a){return!!(a&&"object"==typeof a&&"nodeType"in a&&1===a.nodeType)}function f(a){return a&&"object"==typeof a?Object.keys(a).filter(function(a){return!isNaN(parseInt(a,10))}).splice(-1)[0]:c}function g(a){var b=f(a);return"string"==typeof b?parseInt(b,10):0}function h(a){var b=f(a);return"string"==typeof b?parseInt(b,10)+1:0}function i(a){if("object"!=typeof a||null===a)return 0;var b,c=0;if("function"==typeof Object.keys)c=Object.keys(a).length;else for(b in a)a.hasOwnProperty(b)&&c++;return c}function j(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function k(a,b){if([].forEach)return[].forEach.call(a,b);var c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.call(a,a[c])}function l(a){return!(!a||"object"!=typeof a||!a[0])&&(D=a[0],"undefined"!=typeof a[1]&&i(a[1])>0&&j(E,a[1]),!!m()&&(!!o()&&B()))}function m(){switch(typeof D){case"string":G=b.getElementById(D);break;case"object":e(D)&&(G=D)}return G}function n(){return!(!G.enctype||"multipart/form-data"!==G.enctype)}function o(){return H=G.querySelectorAll("input, textarea, select"),H.length}function p(a){return"INPUT"===a.nodeName&&"radio"===a.type}function q(a){return"INPUT"===a.nodeName&&"checkbox"===a.type}function r(a){return"INPUT"===a.nodeName&&"file"===a.type}function s(a){return"TEXTAREA"===a.nodeName}function t(a){
return"SELECT"===a.nodeName&&"select-one"===a.type}function u(a){return"SELECT"===a.nodeName&&"select-multiple"===a.type}function v(a){return"BUTTON"===a.nodeName&&"submit"===a.type}function w(a){return a.checked}function x(b){return a.FileList&&b.files instanceof a.FileList}function y(a){if(p(a))return!!w(a)&&a.value;if(q(a))return!!w(a)&&a.value;if(r(a))return!!n()&&(x(a)&&a.files.length>0?a.files:!(!a.value||""===a.value)&&a.value);if(s(a))return!(!a.value||""===a.value)&&a.value;if(t(a))return a.value&&""!==a.value?a.value:!(!a.options||!a.options.length||""===a.options[0].value)&&a.options[0].value;if(u(a)){if(a.options&&a.options.length>0){var b=[];return k(a.options,function(a){a.selected&&b.push(a.value)}),E.includeEmptyValuedElements?b:!!b.length&&b}return!1}return v(a)?a.value&&""!==a.value?a.value:!(!a.innerText||""===a.innerText)&&a.innerText:"undefined"!=typeof a.value&&(E.includeEmptyValuedElements?a.value:""!==a.value&&a.value)}function z(a,b,c,d){var e=b[0];if(p(a))return c!==!1?(d[e]=c,c):void 0;if(u(a)){if(c===!1)return;d[e]=c}return d[e]=c,c}function A(a,b,c,d){var e=b[0];return b.length>1?"[]"===e?(d[h(d)]={},A(a,b.splice(1,b.length),c,d[g(d)])):d[e]&&i(d[e])>0?A(a,b.splice(1,b.length),c,d[e]):(d[e]={},A(a,b.splice(1,b.length),c,d[e])):1===b.length?"[]"===e?(d[h(d)]=c,d):(z(a,b,c,d),d):void 0}function B(){var a,b,c,d,e=0,f={};for(e=0;e<H.length;e++)b=H[e],!b.name||""===b.name||b.disabled||p(b)&&!w(b)||(c=y(b),(c!==!1||E.includeEmptyValuedElements)&&(a=b.name.match(F),1===a.length&&z(b,a,c?c:"",f),a.length>1&&A(b,a,c?c:"",f)));return d=i(f),d>0&&f}if(!(this instanceof d)){var C=new d;return C.init.call(C,Array.prototype.slice.call(arguments))}var D=null,E={includeEmptyValuedElements:!1,w3cSuccessfulControlsOnly:!1},F=/[^\[\]]+|\[\]/g,G=null,H=[];return{init:l}};jstack.formToObject=d,$.fn.toObject=function(){return d(this.get(0))}}(window,document);