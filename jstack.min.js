function uniqid(a,b){"undefined"==typeof a&&(a="");var c,d=function(a,b){return a=parseInt(a,10).toString(16),b<a.length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,c=a,c+=d(parseInt((new Date).getTime()/1e3,10),8),c+=d(this.php_js.uniqidSeed,5),b&&(c+=(10*Math.random()).toFixed(8).toString()),c}function trim(a,b){var c=[" ","\n","\r","\t","\f","\x0B"," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029","　"].join(""),d=0,e=0;for(a+="",b&&(c=(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"$1")),d=a.length,e=0;e<d;e++)if(c.indexOf(a.charAt(e))===-1){a=a.substring(e);break}for(d=a.length,e=d-1;e>=0;e--)if(c.indexOf(a.charAt(e))===-1){a=a.substring(0,e+1);break}return c.indexOf(a.charAt(0))===-1?a:""}function ltrim(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"$1"):" \\s ";var c=new RegExp("^["+b+"]+","g");return(a+"").replace(c,"")}function rtrim(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"\\$1"):" \\s ";var c=new RegExp("["+b+"]+$","g");return(a+"").replace(c,"")}!function(a,b,c){a.jstack=function(){var a=function(){};return a}()}(window,$js,jQuery),jstack.hasOwnProperty2=function(a,b){var c=a[b];return c!==Object[b]&&c!==Object.__proto__[b]&&c!==Array[b]&&c!==Array.__proto__[b]},jstack.url=function(){var Url=function(){},recursiveArrayToObject=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(a[c]instanceof Array?b[c]=recursiveArrayToObject(a[c]):b[c]=a[c]);return b};return Url.prototype.params=new Array,Url.prototype.getQuery=function(a){var b=a,c=b.indexOf("?");return c==-1?"":(b=b.substr(c+1,b.length),c=b.indexOf("#"),c==-1?b:b.substr(0,c))},Url.prototype.getPath=function(a){var b=a.indexOf("?");return b==-1?a:a.substr(0,b)},Url.prototype.buildParamFromString=function(param){var p=decodeURIComponent(param),strpos=p.indexOf("=");if(strpos==-1)return""!==p&&(this.params[p]="",this.params.length++),!0;var name=p.substr(0,strpos),value=p.substr(strpos+1,p.length),openBracket=name.indexOf("["),closeBracket=name.indexOf("]");if(openBracket==-1||closeBracket==-1)return openBracket==-1&&closeBracket==-1||(name=name.replace(new RegExp("[\\[\\]]"),"_")),this.params[name]=value,!0;var matches=name.match(new RegExp("\\[.*?\\]","g"));name=name.substr(0,openBracket),p="this.params";var key=name;for(var i in matches)matches.hasOwnProperty(i)&&(p+="['"+key+"']",void 0!=eval(p)&&"object"==typeof eval(p)||eval(p+"= new Array();"),key=matches[i].substr(1,matches[i].length-2),""==key&&(key=eval(p).length));p+="['"+key+"']",eval(p+"= '"+value+"';")},Url.prototype.parseQuery=function(a){var b=a;b=b.replace(new RegExp("&"),"&"),this.params=new Array,this.params.length=0,b=b.split("&");for(var c=0;c<b.length;c++)this.buildParamFromString(b[c]);return recursiveArrayToObject(this.params)},Url.prototype.buildStringFromParam=function(a,b){var c="",d="";if(void 0!=b&&(c=b),"object"==typeof a)for(var e in a)d=a[e],e=""==c?e:"["+e+"]","object"==typeof d?this.buildStringFromParam(d,c+e):this.params[this.params.length]=c+e+"="+d},Url.prototype.buildQuery=function(a){return this.params=new Array,this.buildStringFromParam(a),this.params.join("&")},Url.prototype.getParams=function(a){return this.parseQuery(this.getQuery(a))},Url.prototype.getParamsFromHash=function(){return this.getParams(document.location.hash)},new Url}(),jstack.route=function(a,b){var c=[],d={},e=function(a,b){this.name=b,this.path=a,this.keys=[],this.fns=[],this.params={},this.regex=f(this.path,this.keys,!1,!1)};e.prototype.addHandler=function(a){this.fns.push(a)},e.prototype.removeHandler=function(a){for(var b=0,c=this.fns.length;b<c;b++){var d=this.fns[b];if(a==d)return void this.fns.splice(b,1)}},e.prototype.run=function(a){for(var b=0,c=this.fns.length;b<c;b++)this.fns[b].apply(this,a)},e.prototype.match=function(a,b){var c=this.regex.exec(a);if(!c)return!1;for(var d=1,e=c.length;d<e;++d){var f=this.keys[d-1],g="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];f&&(this.params[f.name]=g),b.push(g)}return!0},e.prototype.toURL=function(a){var b=this.path;for(var c in a)b=b.replace("/:"+c,"/"+a[c]);if(b=b.replace(/\/:.*\?/g,"/").replace(/\?/g,""),b.indexOf(":")!=-1)throw new Error("missing parameters for url: "+b);return b};var f=function(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))},g=function(a,b){var f=a.split(" "),g=2==f.length?f[0]:null;a=2==f.length?f[1]:f[0],d[a]||(d[a]=new e(a,g),c.push(d[a])),d[a].addHandler(b)},h=function(a,c,d){if("function"==typeof c)g(a,c),h.reload();else if("object"==typeof a){for(var e in a)g(e,a[e]);h.reload()}else if("undefined"==typeof c)h.navigate(a);else if("object"==typeof c){var f={};d&&$.extend(f,v()),$.extend(f,b.getParams(a),c);var i=b.buildQuery(f);i&&(i="?"+i),a=b.getPath(a),h.navigate(a+i)}};h.lookup=function(a,b){for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f.name==a)return f.toURL(b)}},h.remove=function(a,b){var c=d[a];c&&c.removeHandler(b)},h.removeAll=function(){d={},c=[]},h.navigate=function(b,c){c=c||{};var d=c.silent||!1;d&&s(),setTimeout(function(){a.location.hash=b,d&&setTimeout(function(){r()},1)},1)};var i=function(){var b="",c=a.location.hash.substring(1),d=c.indexOf("#");return d!==-1&&(b=c.substr(d+1)),b},j=function(){var b=a.location.hash.substring(1),c=b.indexOf("#");return c!==-1&&(b=b.substr(0,c)),b},k=function(a,b){var c=[];return!!b.match(a,c)&&(b.run(c),!0)},l=function(a){for(var b=0,d=c.length;b<d;b++){var e=c[b];if(k(a,e))return}};h.load=l;var m,n=function(){var a=j();return a!=m?(m=a,$(window).trigger("mainHashchange"),l(m)):void $(window).trigger("subHashchange")};h.reload=n;var o=function(b){var c=$(this),d=c.attr("href");if(d)return"/"+d==a.location.pathname?(b.preventDefault(),jstack.route(""),!1):void("##"==d.substr(0,2)&&(b.preventDefault(),q(d.substr(2))))},p=function(b){var c=b+"#"+i();a.location.hash=c},q=function(b){var c=m+"#"+b;a.location.hash=c},r=function(){a.addEventListener?a.addEventListener("hashchange",n,!1):a.attachEvent("onhashchange",n),$(document).on("click","a",o)},s=function(){a.removeEventListener?a.removeEventListener("hashchange",n):a.detachEvent("onhashchange",n),$(document).off("click","a",o)};h.start=r,h.stop=s;var t=function(){return b.getQuery(j())},u=function(){return b.getPath(j())},v=function(){return b.getParams(j())},w=function(a){return v()[a]},x=function(){return b.getParams("?"+i())},y=function(a){return x()[a]};h.getHash=j,h.getHash2=i,h.getParams=v,h.getParam=w,h.getSubParams=x,h.getSubParam=y,h.getQuery=t,h.getPath=u,h.setMainHash=p,h.setSubHash=q;var z=document.getElementsByTagName("base")[0];if(z)h.baseHref=z.href;else{var A=window.location,B=A.pathname;B=B.split("/"),B.pop(),B=B.join("/")||"/";var C,D=A.username?A.username+(A.password?":"+A.password:"")+"@":"";C=A.port&&("https"==A.protocol&&"443"!=A.port||"80"!=A.port)?":"+A.port:"",h.baseHref=A.protocol+"//"+D+A.host+C+B}var E=a.location.href;E=E.split("/"),E=E[0]+"//"+E[2],E=h.baseHref.substr(E.length),h.basePath=E;var F=a.location.href.substr(h.baseHref.length),G=F.indexOf("#");return G>-1&&(F=F.substr(0,G)),h.baseLocation=F,h}(window,jstack.url),function(w,j){j.templateVarSubstitutions={};var separatorStart="<%",separatorEnd="%>",separatorStartE="<%",separatorEndE="%>",cache={},reg1=eval("/'(?=[^"+separatorEndE+"]*"+separatorEndE+")/g"),reg2=eval("/"+separatorStartE+"=(.+?)"+separatorEndE+"/g");j.template=function(a,b,c,d){var e;if(c&&cache[c])e=cache[c];else{var f=j.templateVarSubstitutions;a=a.html();for(var g in f)f.hasOwnProperty(g)&&(a=a.replace(g,separatorStart+f[g]+separatorEnd));var h="var p=[];with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").replace(reg1,"\t").split("'").join("\\'").split("\t").join("'").replace(reg2,"',$1,'").split(separatorStart).join("');").split(separatorEnd).join("p.push('")+"');}return p.join('');";try{e=new Function("obj",h),c&&(cache[c]=e)}catch(i){d&&(console.log(i),console.log(h),console.log(a))}}return b?e(b):e}}(window,jstack),function(a,b){var c={};b.controller=function(a){for(var b,d,e=!0,f=0;f<arguments.length;f++)switch(typeof arguments[f]){case"boolean":d=arguments[f];break;case"function":b=arguments[f];break;case"object":e=arguments[f]}if(e instanceof Array&&$js.require(e,d),b){var g=function(){return b.apply(g,arguments)};g.jstack={},c[a]=g}return c[a]}}(window,jstack),function(a){jstack.watcher=a(),jstack.watch=jstack.watcher.watch,jstack.unwatch=jstack.watcher.unwatch,jstack.callWatchers=jstack.watcher.callWatchers}(function(){var a={noMore:!1,useDirtyCheck:!1},b=[],c=[],d=[],e=!1;try{e=Object.defineProperty&&Object.defineProperty({},"x",{})}catch(f){}var g,h=function(a){var b={};return a&&"[object Function]"==b.toString.call(a)},i=function(a){return"[object Array]"===Object.prototype.toString.call(a)},j=function(a){return"[object Object]"==={}.toString.apply(a)},k=function(a,b){var c=[],d=[];if("string"!=typeof a&&"string"!=typeof b){if(i(a))for(var e=0;e<a.length;e++)void 0===b[e]&&c.push(e);else for(var e in a)a.hasOwnProperty(e)&&void 0===b[e]&&c.push(e);if(i(b))for(var f=0;f<b.length;f++)void 0===a[f]&&d.push(f);else for(var f in b)b.hasOwnProperty(f)&&void 0===a[f]&&d.push(f)}return{added:c,removed:d}},l=function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=a[c];return b},m=function(a,b,c,d){try{Object.observe(a,function(a){a.forEach(function(a){a.name===b&&d(a.object[a.name])})})}catch(e){try{Object.defineProperty(a,b,{get:c,set:function(a){d.call(this,a,!0)},enumerable:!0,configurable:!0})}catch(f){try{Object.prototype.__defineGetter__.call(a,b,c),Object.prototype.__defineSetter__.call(a,b,function(a){d.call(this,a,!0)})}catch(g){o(a,b,d)}}}},n=function(a,b,c){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:c})}catch(d){a[b]=c}},o=function(a,b,d){c[c.length]={prop:b,object:a,orig:l(a[b]),callback:d}},p=function(){h(arguments[1])?q.apply(this,arguments):i(arguments[1])?r.apply(this,arguments):s.apply(this,arguments)},q=function(a,b,c,d){if("string"!=typeof a&&(a instanceof Object||i(a))){if(i(a)){if(E(a,"__watchall__",b,c),void 0===c||c>0)for(var f=0;f<a.length;f++)q(a[f],b,c,d)}else{var f,g=[];for(f in a)"$val"==f||!e&&"watchers"===f||Object.prototype.hasOwnProperty.call(a,f)&&g.push(f);r(a,g,b,c,d)}d&&S(a,"$$watchlengthsubjectroot",b,c)}},r=function(a,b,c,d,e){if("string"!=typeof a&&(a instanceof Object||i(a)))for(var f=0;f<b.length;f++){var g=b[f];s(a,g,c,d,e)}},s=function(a,b,c,d,e){"string"!=typeof a&&(a instanceof Object||i(a))&&(h(a[b])||(null!=a[b]&&(void 0===d||d>0)&&q(a[b],c,void 0!==d?d-1:d),E(a,b,c,d),e&&(void 0===d||d>0)&&S(a,b,c,d)))},t=function(){h(arguments[1])?u.apply(this,arguments):i(arguments[1])?v.apply(this,arguments):J.apply(this,arguments)},u=function(a,b){if(!(a instanceof String)&&(a instanceof Object||i(a)))if(i(a)){for(var c=["__watchall__"],d=0;d<a.length;d++)c.push(d);v(a,c,b)}else{var e=function(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&(a[d]instanceof Object?e(a[d]):c.push(d));v(a,c,b)};e(a)}},v=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&J(a,b[d],c)},w=[],x=null,y=function(){x=null;for(var a=0;a<w.length;a++)w[a]();w.length=0},z=function(){return x||(x=setTimeout(y)),x},A=function(a){null==x&&z(),w[w.length]=a},B=function(){var a=h(arguments[2])?D:C;a.apply(this,arguments)},C=function(a,b,c,d){var e,f=null,g=-1,h=i(a),j=function(c,d,e,i){var j=z();if(g!==j&&(g=j,f={type:"update"},f.value=a,f.splices=null,A(function(){b.call(this,f),f=null})),h&&a===this&&null!==f){if("pop"===d||"shift"===d)e=[],i=[i];else if("push"===d||"unshift"===d)e=[e],i=[];else if("splice"!==d)return;f.splices||(f.splices=[]),f.splices[f.splices.length]={index:c,deleteCount:i?i.length:0,addedCount:e?e.length:0,added:e,deleted:i}}};e=1==c?void 0:0,q(a,j,e,d)},D=function(a,b,c,d,e){a&&b&&(s(a,b,function(a,b,f,g){var h={type:"update"};h.value=f,h.oldvalue=g,(d&&j(f)||i(f))&&C(f,c,d,e),c.call(this,h)},0),(d&&j(a[b])||i(a[b]))&&C(a[b],c,d,e))},E=function(b,c,d,e){var f=!1,g=i(b);b.watchers||(n(b,"watchers",{}),g&&I(b,function(a,d,f,g){if(O(b,a,d,f,g),0!==e&&f&&(j(f)||i(f))){var h,k,l,m,n=b.watchers[c];for((m=b.watchers.__watchall__)&&(n=n?n.concat(m):m),l=n?n.length:0,h=0;h<l;h++)if("splice"!==d)q(f,n[h],void 0===e?e:e-1);else for(k=0;k<f.length;k++)q(f[k],n[h],void 0===e?e:e-1)}})),b.watchers[c]||(b.watchers[c]=[],g||(f=!0));for(var h=0;h<b.watchers[c].length;h++)if(b.watchers[c][h]===d)return;if(b.watchers[c].push(d),f){var k=b[c],l=function(){return k},p=function(d,f){var g=k;if(k=d,0!==e&&b[c]&&(j(b[c])||i(b[c]))&&!b[c].watchers){var h,l=b.watchers[c].length;for(h=0;h<l;h++)q(b[c],b.watchers[c][h],void 0===e?e:e-1)}return L(b,c)?void M(b,c):void(a.noMore||g!==d&&(f?O(b,c,"set",d,g):F(b,c,"set",d,g),a.noMore=!1))};a.useDirtyCheck?o(b,c,p):m(b,c,l,p)}},F=function(a,b,c,d,e){if(void 0!==b){var f,g,h=a.watchers[b];(g=a.watchers.__watchall__)&&(h=h?h.concat(g):g),f=h?h.length:0;for(var i=0;i<f;i++)h[i].call(a,b,c,d,e)}else for(var b in a)a.hasOwnProperty(b)&&F(a,b,c,d,e)},G=["pop","push","reverse","shift","sort","slice","unshift","splice"],H=function(a,b,c,d){n(a,c,function(){var e,f,g,h,i=0;if("splice"===c){var j=arguments[0],k=j+arguments[1];for(g=a.slice(j,k),f=[],e=2;e<arguments.length;e++)f[e-2]=arguments[e];i=j}else f=arguments.length>0?arguments[0]:void 0;return h=b.apply(a,arguments),"slice"!==c&&("pop"===c?(g=h,i=a.length):"push"===c?i=a.length-1:"shift"===c?g=h:"unshift"!==c&&void 0===f&&(f=h),d.call(a,i,c,f,g)),h})},I=function(a,b){if(h(b)&&a&&!(a instanceof String)&&i(a))for(var c,d=G.length;d--;)c=G[d],H(a,a[c],c,b)},J=function(a,b,c){if(a.watchers[b])if(void 0===c)delete a.watchers[b];else for(var d=0;d<a.watchers[b].length;d++){var e=a.watchers[b][d];e==c&&a.watchers[b].splice(d,1)}T(a,b,c),U(a,b)},K=function(a,b){if(a.watchers){var c="__wjs_suspend__"+(void 0!==b?b:"");a.watchers[c]=!0}},L=function(a,b){return a.watchers&&(a.watchers.__wjs_suspend__||a.watchers["__wjs_suspend__"+b])},M=function(a,b){A(function(){delete a.watchers.__wjs_suspend__,delete a.watchers["__wjs_suspend__"+b]})},N=null,O=function(a,b,c,e,f){d[d.length]={obj:a,prop:b,mode:c,newval:e,oldval:f},null===N&&(N=setTimeout(P))},P=function(){var a=null;N=null;for(var b=0;b<d.length;b++)a=d[b],F(a.obj,a.prop,a.mode,a.newval,a.oldval);a&&(d=[],a=null)},Q=function(){for(var a=0;a<b.length;a++){var d=b[a];if("$$watchlengthsubjectroot"===d.prop){var e=k(d.obj,d.actual);(e.added.length||e.removed.length)&&(e.added.length&&r(d.obj,e.added,d.watcher,d.level-1,!0),d.watcher.call(d.obj,"root","differentattr",e,d.actual)),d.actual=l(d.obj)}else{var e=k(d.obj[d.prop],d.actual);if(e.added.length||e.removed.length){if(e.added.length)for(var f=0;f<d.obj.watchers[d.prop].length;f++)r(d.obj[d.prop],e.added,d.obj.watchers[d.prop][f],d.level-1,!0);F(d.obj,d.prop,"differentattr",e,d.actual)}d.actual=l(d.obj[d.prop])}}var g,h;if(c.length>0)for(var a=0;a<c.length;a++)g=c[a],h=g.object[g.prop],R(g.orig,h)||(g.orig=l(h),g.callback(h))},R=function(a,b){var c,d=!0;if(a!==b)if(j(a)){for(c in a)if((e||"watchers"!==c)&&a[c]!==b[c]){d=!1;break}}else d=!1;return d},S=function(a,c,d,e){var f;f=l("$$watchlengthsubjectroot"===c?a:a[c]),b.push({obj:a,prop:c,actual:f,watcher:d,level:e})},T=function(a,c,d){for(var e=0;e<b.length;e++){var f=b[e];f.obj==a&&f.prop==c&&f.watcher==d&&b.splice(e,1)}},U=function(a,b){for(var d,e=0;e<c.length;e++){var f=c[e],g=f.object.watchers;d=f.object==a&&f.prop==b&&g&&(!g[b]||0==g[b].length),d&&c.splice(e,1)}};return a.intervalLength=50,a.start=function(b){g||(b&&(a.intervalLength=b),Q(),g=setInterval(Q,a.intervalLength))},a.stop=function(){g&&clearInterval(g),g=!1},a.watch=p,a.unwatch=t,a.callWatchers=F,a.suspend=K,a.onChange=B,a}),jstack.way=function(){var a,b,c="way",d=function(){this._watchers={},this._watchersAll={}};d.prototype.constructor=d,d.prototype.watchAll=function(a){this._watchersAll=this._watchersAll||[],n.contains(this._watchersAll,a)||this._watchersAll.push(a)},d.prototype.watch=function(a,b){this._watchers||(this._watchers={}),this._watchers[a]=this._watchers[a]||[],this._watchers[a].push(b)},d.prototype.findWatcherDeps=function(a){var b=[],c=n.keys(this._watchers);return c.forEach(function(c){g(a,c)&&b.push(c)}),b},d.prototype.emitChange=function(a){this._watchers||(this._watchers={});var b=this,c=b.findWatcherDeps(a);c.forEach(function(a){b._watchers[a]&&b._watchers[a].forEach(function(c){c.apply(b,[b.get(a)])})}),b._watchersAll&&n.isArray(b._watchersAll)&&b._watchersAll.forEach(function(c){n.isFunction(c)&&c.apply(b,[a,b.get(a)])})};var e=function(){this.data={},this._bindings={},this.options={persistent:!0,timeoutInput:50,timeoutDOM:500}};e.prototype=Object.create(d.prototype),e.constructor=e,e.prototype.dom=function(a){return this._element=b.dom(a).get(0),this},e.prototype.toStorage=function(a,b){var c=this,b=b||c._element,a=a||c.dom(b).getOptions(),d=c.dom(b).toJSON(a),e=c.dom(b).scope(),f=e?e+"."+a.data:a.data;return!a.readonly&&void c.set(f,d,a)},e.prototype.toJSON=function(a,b){var c=this,b=b||c._element,d=c.dom(b).getValue(),a=a||c.dom(b).getOptions();return n.isArray(a.pick)&&(d=k(d,a.pick,!0)),n.isArray(a.omit)&&(d=k(d,a.omit,!1)),d},e.prototype.fromStorage=function(a,b){var c=this,b=b||c._element,a=a||c.dom(b).getOptions();if("INPUT"!=b.tagName||"file"!=b.type){if(a.writeonly)return!1;var d=c.dom(b).scope(),e=d?d+"."+a.data:a.data,f=c.get(e);"undefined"==typeof f&&(f=$(b).val(),c.set(e,f,a)),c.dom(b).fromJSON(f,a)}},e.prototype.fromJSON=function(a,b,c){var d=this,c=c||d._element,b=b||d.dom(c).getOptions();if(b.writeonly)return!1;if(n.isObject(a)){n.isArray(b.pick)&&(a=k(a,b.pick,!0)),n.isArray(b.omit)&&(a=k(a,b.omit,!1));var e=n.isObject(d.dom(c).toJSON())?d.dom(c).toJSON():{};a=n.extend(e,a)}b.json&&(a=v.isStringified(a)?a:v.prettyprint(a)),d.dom(c).setValue(a,b)},e.prototype.getValue=function(a){var c=this,a=a||c._element,d={SELECT:function(){return b.dom(a).val()},INPUT:function(){var c=b.dom(a).type();return n.contains(["checkbox","radio"],c)?b.dom(a).prop("checked")?b.dom(a).val():null:"file"==c?a.files:"submit"!=c?$(a).val():void 0},TEXTAREA:function(){return b.dom(a).val()}},e=function(c){return b.dom(a).html()},f=b.dom(a).get(0).tagName,g=d[f]||e;return g()},e.prototype._transforms={uppercase:function(a){return n.isString(a)?a.toUpperCase():a},lowercase:function(a){return n.isString(a)?a.toLowerCase():a},reverse:function(a){return a&&a.split&&n.isFunction(a.split)?a.split("").reverse().join(""):a}},e.prototype.registerTransform=function(a,b){var c=this;n.isFunction(b)&&(c._transforms[a]=b)},e.prototype.setValue=function(a,c,d){var e=this,d=d||e._element,c=c||e.dom(d).getOptions();c.transform=c.transform||[],c.transform.forEach(function(b){var c=e._transforms[b]||function(a){return a};a=c(a)});var f={SELECT:function(a){b.dom(d).val(a)},INPUT:function(a){n.isString(a)||(a=$.isEmptyObject(a)?"":JSON.stringify(a));var c=b.dom(d).get(0).type;if(n.contains(["checkbox","radio"],c))a===b.dom(d).val()?b.dom(d).prop("checked",!0):b.dom(d).prop("checked",!1);else{if("file"==c)return;"submit"!=c&&b.dom(d).val(a||"")}},TEXTAREA:function(a){n.isString(a)||(a=$.isEmptyObject(a)?"":JSON.stringify(a)),b.dom(d).val(a||"")},PRE:function(a){c.html?b.dom(d).html(a):b.dom(d).text(a)},IMG:function(a){if(!a)return a=c["default"]||"",b.dom(d).attr("src",a),!1;var e=function(a,c){b.dom(d).addClass("way-loading"),b.dom("img",{src:a,onerror:function(){c(!1)},onload:function(){c(!0)}})};e(a,function(e){b.dom(d).removeClass("way-loading"),e?b.dom(d).removeClass("way-error").addClass("way-success"):(a?b.dom(d).addClass("way-error"):b.dom(d).removeClass("way-error").removeClass("way-success"),a=c["default"]||""),b.dom(d).attr("src",a)})}},g=function(a){c.html?b.dom(d).html(a||""):b.dom(d).text(a||"")},h=b.dom(d).get(0).tagName,i=f[h]||g;null!==a&&"undefined"!=typeof a||(a=""),i(a)},e.prototype.setDefault=function(a,b,c){var d=this,c=c||d._element,a=a||!1,b=b?n.extend(d.dom(c).getOptions(),b):d.dom(c).getOptions();return!!b["default"]&&void(a?d.set(b.data,b["default"],b):d.dom(c).setValue(b["default"],b))},e.prototype.setDefaults=function(){var a=this,d="["+c+"-default]",e=b.dom(d).get();$.each(e,function(b,c){var d=a.dom(c).getOptions(),e=d.data||null,f=e?a.get(e):null;f||a.dom(c).setDefault()})},e.prototype.registerBindings=function(){var a=this,d="["+c+"-data]";a._bindings={};var e=b.dom(d).get();$.each(e,function(c,d){var e=a.dom(d).getOptions(),f=a.dom(d).scope(),g=f?f+"."+e.data:e.data;a._bindings[g]=a._bindings[g]||[],n.contains(a._bindings[g],b.dom(d).get(0))||a._bindings[g].push(b.dom(d).get(0))})},e.prototype.updateBindings=function(a){var c=this;c._bindings=c._bindings||{};var d=l(c._bindings,a);d.forEach(function(a){var d=b.dom(a).get(0)===b.dom(":focus").get(0);d&&"true"==a.getAttribute("data-way-focus-nosync")||c.dom(a).fromStorage()}),c._bindings.__all__&&c._bindings.__all__.forEach(function(a){c.dom(a).fromJSON(c.data)})},e.prototype.registerRepeats=function(){var a=this,d="["+c+"-repeat]";a._repeats=a._repeats||{},a._repeatsCount=a._repeatsCount||0;var e=b.dom(d).get();$.each(e,function(d,e){var f=a.dom(e).getOptions();a._repeats[f.repeat]=a._repeats[f.repeat]||[];var g=c+'-repeat-wrapper="'+a._repeatsCount+'"',h=b.dom(e).parent("["+g+"]");if(!h.length){a._repeats[f.repeat].push({id:a._repeatsCount,element:b.dom(e).clone(!0).removeAttr(c+"-repeat").removeAttr(c+"-filter").get(0),selector:f.repeat,filter:f.filter});var i=document.createElement("div");b.dom(i).attr(c+"-repeat-wrapper",a._repeatsCount),b.dom(i).attr(c+"-scope",f.repeat),f.filter&&b.dom(i).attr(c+"-filter",f.filter),b.dom(e).replaceWith(i),a.updateRepeats(f.repeat),a._repeatsCount++}})},e.prototype.updateRepeats=function(a){var d=this;d._repeats=d._repeats||{};var e=l(d._repeats,a);e.forEach(function(a){var e="["+c+'-repeat-wrapper="'+a.id+'"]',f=d.get(a.selector),g=[];a.filter=a.filter||[],b.dom(e).empty();for(var h in f)if(f.hasOwnProperty(h)){b.dom(a.element).attr(c+"-scope",h);var i=b.dom(a.element).get(0).outerHTML;i=i.replace(/\$\$key/gi,h),g.push(i)}b.dom(e).html(g.join("")),d.registerBindings(),d.updateBindings()})},e.prototype.updateForms=function(){var a=this,d="form["+c+"-data], form["+c+"-data-binded]",e=b.dom(d).get();$.each(e,function(d,e){var f=a.dom(e).getOptions(),g=f.data;g?$(e).data("formDataSelector",g):g=$(e).data("formDataSelector"),b.dom(e).removeAttr(c+"-data").attr(c+"-data-binded",!0);var i=b.dom(e).find("[name]:not([way-data])").reverse().get();$.each(i,function(c,d){var i=b.dom(d).attr("name");if(h(i,"[]")){var j=i.split("[]")[0],k="[name^='"+j+"']",l=b.dom(e).find(k).get().length;i=j+"."+l}var m=g+"."+i;f.data=m,a.dom(d).setOptions(f)})})},e.prototype.registerDependencies=function(){this.registerBindings(),this.registerRepeats()},e.prototype.updateDependencies=function(a){this.updateBindings(a),this.updateRepeats(a),this.updateForms(a)},e.prototype.setOptions=function(a,d){var e=this,d=e._element||d;for(var f in a)if(a.hasOwnProperty(f)){var g=c+"-"+f,h=a[f];b.dom(d).attr(g,h)}},e.prototype.getOptions=function(a){var b=this,a=a||b._element,d={data:null,html:!1,readonly:!1,writeonly:!1,persistent:!1};return n.extend(d,b.dom(a).getAttrs(c))},e.prototype.getAttrs=function(a,c){var d=this,c=c||d._element,e=function(a,b){var c={pick:"array",omit:"array",readonly:"boolean",writeonly:"boolean",json:"boolean",html:"boolean",persistent:"boolean"},d={array:function(a){return a.split(",")},"boolean":function(a){return"true"===a||"false"!==a}},e=function(){return b},f=c[a]||null,g=d[f]||e;return g(b)},f={},h=[].slice.call(b.dom(c).get(0).attributes);return h.forEach(function(b){var c=!(!a||!g(b.name,a+"-"));if(c){var d=a?b.name.slice(a.length+1,b.name.length):b.name,h=e(d,b.value);n.contains(["transform","filter"],d)&&(h=h.split("|")),f[d]=h}}),f},e.prototype.scope=function(a,d){var e=this,d=d||e._element,f=c+"-scope",g=c+"-scope-break",h=[],i="",j="["+g+"], ["+f+"]",k=b.dom(d).parents(j).get();return $.each(k,function(a,c){if(b.dom(c).attr(g))return!1;var d=b.dom(c).attr(f);h.unshift(d)}),b.dom(d).attr(f)&&h.push(b.dom(d).attr(f)),b.dom(d).attr(g)&&(h=[]),i=n.compact(h).join(".")},e.prototype.get=function(a){var b=this;return!(void 0!==a&&!n.isString(a))&&(b.data?a?v.get(b.data,a):b.data:{})},e.prototype.set=function(a,b,c){if(!a)return!1;if("this"===a.split(".")[0])return console.log('Sorry, "this" is a reserved word in way.js'),!1;var d=this;if(c=c||{},a){if(!n.isString(a))return!1;d.data=d.data||{},d.data=a?v.set(d.data,a,b):{},d.updateDependencies(a),d.emitChange(a,b),c.persistent&&d.backup(a)}},e.prototype.push=function(a,b,c){if(!a)return!1;var d=this;c=c||{},a&&(d.data=a?v.push(d.data,a,b,!0):{}),d.updateDependencies(a),d.emitChange(a,null),c.persistent&&d.backup(a)},e.prototype.remove=function(a,b){var c=this;b=b||{},a?c.data=v.remove(c.data,a):c.data={},c.updateDependencies(a),c.emitChange(a,null),b.persistent&&c.backup(a)},e.prototype.clear=function(){this.remove(null,{persistent:!0})},e.prototype.backup=function(){var a=this;if(a.options.persistent)try{var b=a.data||{};localStorage.setItem(c,JSON.stringify(b))}catch(d){console.log("Your browser does not support localStorage.")}},e.prototype.restore=function(){var a=this;if(a.options.persistent)try{var b=localStorage.getItem(c);try{b=JSON.parse(b);for(var d in b)b.hasOwnProperty(d)&&a.set(d,b[d])}catch(e){}}catch(e){console.log("Your browser does not support localStorage.")}};var f=function(a,b){var c=["matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],d=!1;return $.each(c,function(c,e){if(n.isFunction(a[e]))return d=a[e](b),!1}),d},g=function(a,b){return""===b||null!==a&&null!==b&&(a=String(a),b=String(b),a.length>=b.length&&a.slice(0,b.length)===b)},h=function(a,b){return""===b||null!==a&&null!==b&&(a=String(a),b=String(b),a.length>=b.length&&a.slice(a.length-b.length,a.length)===b)},i=function(a){return n.pick(a,n.compact(n.keys(a)))},j=function(a,b,c){var d=n.keys(a);return d.forEach(function(d){c?g(d,b)||delete a[d]:g(d,b)&&delete a[d]}),a},k=function(a,b,c){var d=v.flatten(a);$.each(b,function(a,b){d=j(d,b,c)});var e=v.unflatten(d);return i(e)},l=function(a,b){var c=[];if(b){var d=b.split("."),e=d[d.length-1],f=!isNaN(e);if(f){d.pop();var h=d.join(".");c=a[h]?n.union(c,a[h]):c}for(var h in a)a.hasOwnProperty(h)&&g(h,b)&&(c=n.union(c,a[h]))}else for(var h in a)a.hasOwnProperty(h)&&(c=n.union(c,a[h]));return c},m=function(a){return a&&n.isString(a)?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},n={},o=Array.prototype.slice,p=Array.prototype.concat,q=Object.prototype.toString,r=Object.prototype.hasOwnProperty,s=function(a,b,c,d){if(b&&n.every(a,n.isArray))return p.apply(d,a);for(var e=0,f=a.length;e<f;e++){var g=a[e];n.isArray(g)||n.isArguments(g)?b?Array.prototype.push.apply(d,g):s(g,b,c,d):c||d.push(g)}return d},t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};n.compact=function(a){return n.filter(a,n.identity)},n.filter=function(a,b,c){var d=[];return null==a?d:(b=n.iteratee(b,c),n.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},n.identity=function(a){return a},n.every=function(a,b,c){if(null==a)return!0;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;d<g;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},n.union=function(){return n.uniq(s(arguments,!0,!0,[]))},n.uniq=function(a,b,c,d){if(null==a)return[];n.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=n.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;g<h;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);n.indexOf(f,j)<0&&(f.push(j),e.push(i))}else n.indexOf(e,i)<0&&e.push(i)}return e},n.pick=function(a,b,c){var d,e={};if(null==a)return e;if(n.isFunction(b)){b=t(b,c);for(d in a)if(a.hasOwnProperty(d)){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var g=p.apply([],o.call(arguments,1));a=new Object(a);for(var h=0,i=g.length;h<i;h++)d=g[h],d in a&&(e[d]=a[d])}return e},n.has=function(a,b){return null!=a&&r.call(a,b)},n.keys=function(a){if(!n.isObject(a))return[];if(Object.keys)return Object.keys(a);var b=[];for(var c in a)n.has(a,c)&&b.push(c);return b},n.contains=function(a,b){return null!=a&&(a.length!==+a.length&&(a=n.values(a)),n.indexOf(a,b)>=0)},n.sortedIndex=function(a,b,c,d){c=n.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;f<g;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},n.property=function(a){return function(b){return b[a]}},n.iteratee=function(a,b,c){return null==a?n.identity:n.isFunction(a)?t(a,b,c):n.isObject(a)?n.matches(a):n.property(a)},n.pairs=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},n.matches=function(a){var b=n.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;d<c;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},n.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=n.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}for(;d<e;d++)if(a[d]===b)return d;return-1},n.values=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},n.extend=function(a){if(!n.isObject(a))return a;for(var b,c,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(c in b)r.call(b,c)&&(a[c]=b[c])}return a},n.isArray=function(a){return"[object Array]"===q.call(a)},n.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===q.call(a)},n.isUndefined=function(a){return void 0===a},n.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},n.each=function(a,b,c){if(null==a)return a;b=t(b,c);var d,e=a.length;if(e===+e)for(d=0;d<e;d++)b(a[d],d,a);else{var f=n.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},n.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){n["is"+a]=function(b){return q.call(b)==="[object "+a+"]"}});var u=function(a,b,c,d){var e,f=b.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),g=0,h=f.length;if(arguments.length>2){for(e=a,h--;g<h;)b=f[g++],a=a[b]=n.isObject(a[b])?a[b]:{};d?n.isArray(a)?a.splice(f[g],1):delete a[f[g]]:a[f[g]]=c,c=e}else{for(;null!=(a=a[f[g++]])&&g<h;);c=g<h?void 0:a}return c},v={};v.VERSION="0.1.0",v.debug=!0,v.exit=function(a,b,c,d){if(v.debug){var e={};e.noJSON="Not a JSON",e.noString="Not a String",e.noArray="Not an Array",e.missing="Missing argument";var f={source:a,data:c,value:d};f.message=e[b]?e[b]:"No particular reason",console.log("Error",f)}},v.is=function(a){return"[object Object]"==q.call(a)},v.isStringified=function(a){var b=!1;try{b=/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}catch(c){}return b},v.get=function(a,b){return void 0==a?v.exit("get","missing","json",a):void 0==b?v.exit("get","missing","selector",b):n.isString(b)?u(a,b):v.exit("get","noString","selector",b)},v.set=function(a,b,c){return void 0==a?v.exit("set","missing","json",a):void 0==b?v.exit("set","missing","selector",b):n.isString(b)?u(a,b,c):v.exit("set","noString","selector",b)},v.remove=function(a,b){return void 0==a?v.exit("remove","missing","json",a):void 0==b?v.exit("remove","missing","selector",b):n.isString(b)?u(a,b,null,!0):v.exit("remove","noString","selector",b);
},v.push=function(a,b,c,d){if(void 0==a)return v.exit("push","missing","json",a);if(void 0==b)return v.exit("push","missing","selector",b);var e=v.get(a,b);if(!n.isArray(e)){if(!d)return v.exit("push","noArray","array",e);e=[]}return e.push(c),v.set(a,b,e)},v.unshift=function(a,b,c){if(void 0==a)return v.exit("unshift","missing","json",a);if(void 0==b)return v.exit("unshift","missing","selector",b);if(void 0==c)return v.exit("unshift","missing","value",c);var d=v.get(a,b);return n.isArray(d)?(d.unshift(c),v.set(a,b,d)):v.exit("unshift","noArray","array",d)},v.flatten=function(a){function b(a,d){if(Object(a)!==a)c[d]=a;else if(Array.isArray(a))for(var e=0,f=a.length;e<f;e++)b(a[e],d?d+"."+e:""+e),0==f&&(c[d]=[]);else{var g=!0;for(var h in a)a.hasOwnProperty(h)&&(g=!1,b(a[h],d?d+"."+h:h));g&&(c[d]={})}}if("Object"!=a.constructor.name)return v.exit("flatten","noJSON","json",a);var c={};return b(a,""),c},v.unflatten=function(a){if(Object(a)!==a||Array.isArray(a))return a;var b,c,d,e,f,g={};for(var h in a)if(a.hasOwnProperty(h)){b=g,c="",e=0;do d=h.indexOf(".",e),f=h.substring(e,d!==-1?d:void 0),b=b[c]||(b[c]=isNaN(parseInt(f))?{}:[]),c=f,e=d+1;while(d>=0);b[c]=a[h]}return g[""]},v.prettyprint=function(a){return JSON.stringify(a,void 0,2)};var w=function(){};w.constructor=w,w.prototype.dom=function(a,b){var c=this,d=[];if(!b)return n.isString(a)?d=[].slice.call(document.querySelectorAll(a)):n.isObject(a)&&a.attributes&&(d=[a]),c._elements=d,c.length=d.length,c;var e=document.createElement(a);for(var f in b)b.hasOwnProperty(f)&&(e[f]=b[f])},w.prototype.find=function(a){var b=this,c=b.get(0),d=[];return n.isString(a)&&(d=[].slice.call(c.querySelectorAll(a))),b._elements=d,b},w.prototype.get=function(a,b){var c=this,d=c._elements||[],e=d[a]||{};return b?(c._element=e,c):n.isNumber(a)?e:d},w.prototype.reverse=function(){return this._elements=this._elements.reverse(),this},w.prototype.val=function(a){return this.prop("value",a)},w.prototype.type=function(a){return this.prop("type",a)},w.prototype.html=function(a){return this.prop("innerHTML",a)},w.prototype.text=function(a){return this.prop("innerHTML",m(a))},w.prototype.prop=function(a,b){var c,d=this,e=d._elements;return $.each(e,function(d,e){return n.isUndefined(b)?(c=e[a],!1):void(e[a]=b)}),c},w.prototype.attr=function(a,b){var c=this;return $.each(this._elements,function(d,e){return void 0===b?(c=e.getAttribute(a),!1):void e.setAttribute(a,b)}),c},w.prototype.removeAttr=function(a){return $.each(this._elements,function(b,c){c.removeAttribute(a)}),this},w.prototype.addClass=function(a){return $.each(this._elements,function(b,c){c.classList.add(a)}),this},w.prototype.removeClass=function(a){return $.each(this._elements,function(b,c){c.classList.remove(a)}),this},w.prototype.parents=function(a){for(var b=this,c=b.get(0),d=c.parentNode,e=[];null!==d;){var g=d,h=f(g,a),i=void 0===g.doctype;a||(h=!0),h&&i&&e.push(g),d=g.parentNode}return b._elements=e,b},w.prototype.parent=function(a){var b=this,c=b.get(0),d=c.parentNode,e=f(d,a);return a||(e=!0),e?d:{}},w.prototype.clone=function(a){var b=this,c=b.get(0),d=c.cloneNode(!0);return b._elements=[d],a?b:d},w.prototype.empty=function(a){var b=this,c=b.get(0);if(!c||!c.hasChildNodes)return a?b:c;for(;c.hasChildNodes();)c.removeChild(c.lastChild);return a?b:c},w.prototype.replaceWith=function(a){var b=this,c=b.get(0),d=c.parentNode;d.replaceChild(a,c)},w.prototype.observeDOM=function(){var a=this,b=a._elements;if(window.MutationObserver)for(var c=new MutationObserver(function(a){a.forEach(function(a){"childList"!=a.type&&"subtree"!=a.type||D()})}),d=0,e=b.length;d<e;d++){var f=b[d];c.observe(f,{subtree:!0,childList:!0,attribute:!0})}else for(var d=0,e=b.length;d<e;d++){var f=b[d];f.addEventListener&&f.addEventListener("DOMSubtreeModified",D,!1)}},a=new e;var x=null,y=function(c){x&&clearTimeout(x),x=setTimeout(function(){var d=b.dom(c.target).get(0);a.dom(d).toStorage()},a.options.timeout)},z=function(b){b.preventDefault();var c=a.dom(this).getOptions();a.remove(c.data,c)},A=function(b){b.preventDefault();var c=a.dom(this).getOptions();if(!c||!c["action-push"])return!1;var d=c["action-push"].split(":"),e=d[0]||null,f=d[1]||null;a.push(e,f,c)},B=function(b){b.preventDefault();var c=a.dom(this).getOptions();return!(!c||!c["action-remove"])&&void a.remove(c["action-remove"],c)},C=null,D=function(){C&&clearTimeout(C),C=setTimeout(function(){a.updateForms(),a.registerDependencies(),a.updateDependencies(),E()},a.options.timeoutDOM)};b=new w,a.w=b;var E=function(){b.dom("body").observeDOM(),$("["+c+"-data]").on("input change val",y),$("["+c+"-clear]").on("click",z),$("["+c+"-action-remove]").on("click",B),$("["+c+"-action-push]").on("click",A)};return E(),a.restore(),a}(),function(a,b,c){var d={};b.directive=function(a,b){return b&&(d[a]=b),d[a]},b.directiveCompileLoaded=function(a){return a.find("*").each(function(){var a=c(this);c.each(this.attributes,function(){var b=this.name;"j-loaded-"==b.substr(0,9)&&(a.attr(b.substr(9),this.value),a.removeAttr(b))})}),a},b.directiveCompile=function(a,b){var e=[];return c.each(d,function(d,f){a.find("[j-"+d+"],"+d+"[j]").each(function(){var a=this.tagName==d.toUpperCase(),g=c(this),h=a?g.attr("j"):g.attr("j-"+d),i=f(h,g,b);i&&e.push(i),a?(g.removeAttr("j"),i?i.then(function(){g.replaceWith(g.html())}):g.replaceWith(g.html())):g.removeAttr("j-"+d)})}),e},c.fn.jmlInject=function(a,d){return this.each(function(){var e=c(this),f=uniqid("tmpl");b.templateVarSubstitutions[f]=d,e[a](f)})}}(window,jstack,jQuery),function(a,b){b.directive("if",function(a,b){b.jmlInject("before","if("+a+"){"),b.jmlInject("after","}")}),b.directive("foreach",function(a,b){var c;a.indexOf(" as ")!==-1?(c=a.split(" as "),b.jmlInject("before","$.each("+c[0]+", function(i,"+c[1]+"){")):(c=a.split(" in "),b.jmlInject("before","$.each("+c[1]+", function("+c[0]+"){")),b.jmlInject("after","});")}),b.directive("href",function(a,c){href=b.route.baseLocation+"#"+a,c.attr("href",href)}),b.directive("src",function(a,b){b.attr("j-loaded-src",a)}),b.directive("model",function(a,b){b.attr("way-data",a)}),b.directive("include",function(a,b,c){var d=a.split(".").pop(),e=c+a;"jml"!=d&&(e+=".jml");var f=$.Deferred();return jstack.getTemplate(e).then(function(a){var d=$("<tmpl>"+a+"</tmpl>");$.when.apply($,jstack.directiveCompile(d,c)).then(function(){b.html(d.contents()),f.resolve()})}),f}),b.directive("extend",function(a,b,c){var d=c+a,e=a.split(".").pop();"jml"!=e&&"xjml"!=e&&(d+=".xjml");var f=$.Deferred();return jstack.getTemplate(d).then(function(a){var d=$("<tmpl>"+a+"</tmpl>");$.when.apply($,jstack.directiveCompile(d,c)).then(function(){b.find(">*").each(function(){var a=$(this),b=a.attr("selector");b||(b=a.attr("j"));var c=this.tagName.toLowerCase(),e=a.contents(),f=d.find(b);e.length?f[c](a.contents()):f[c]()}),b.replaceWith(d.contents()),f.resolve()})}),f}),b.directive("open",function(a,b){b.jmlInject("prepend",a);var c=b.attr("j-close");c&&(b.jmlInject("append",c),b.removeAttr("j-close"))}),b.directive("close",function(a,b){var c=b.attr("j-open");c&&(b.jmlInject("prepend",c),b.removeAttr("j-open")),b.jmlInject("append",a)}),b.directive("before",function(a,b){var c=b.attr("j-after");c&&(b.jmlInject("after",c),b.removeAttr("j-after")),b.jmlInject("before",a)}),b.directive("after",function(a,b){var c=b.attr("j-before");c&&(b.jmlInject("before",c),b.removeAttr("j-before")),b.jmlInject("after",a)})}(window,jstack),function(a,b){var c={},d={};b.getTemplate=function(a){if(!d[a]){if($js.dev){var e=(new Date).getTime().toString(),f=a;f.indexOf("_t=")===-1&&(f+=(f.indexOf("?")<0?"?":"&")+"_t="+e)}d[a]=$.Deferred(),$.ajax({url:f,cache:!0,success:function(e){for(var f={},g="",h=e.split("<%"),i=0,j=h.length;i<j;i++)if(i)for(var k=h[i].split("%>"),l=0,m=k.length;l<m;l++)if(l%2)g+=k[l];else{var n=uniqid("tmpl");g+=n,f[n]=k[l]}else g+=h[i];$.extend(b.templateVarSubstitutions,f),c[a]=g,d[a].resolve(c[a])}})}return d[a]}}(window,jstack),jstack.processTemplate=function(a,b,c,d){"undefined"==typeof d&&(d=$js.dev);var e=$.Deferred();return $.when.apply($,jstack.directiveCompile(a,c)).then(function(){var c=function(c){return jstack.directiveCompileLoaded($("<tmpl>"+jstack.template(a,c,b,d)+"</tmpl>")).contents()};e.resolve(c)}),e},jstack.loadView=function(){return function(a){var b=$("<tmpl>"+a.templateHtml+"</tmpl>");b.find("> *").length||b.wrapInner("<div />");var c=b.find("[j-controller]"),d={};c.length||(b.children(0).attr("j-controller",a.path||""),c=b.find("[j-controller]"));var e=0,f=c.length,g=[];a.defaultController||(a.defaultController=function(a){jstack.controller(a,function(){this.jstack.render()})}),c.each(function(){var c=$(this),h=c.attr("j-controller"),i=h.replace("/",".");c.attr("way-scope",i);var j=a.templatePath+"#"+h,k=a.templatePath.split("/");k.pop(),k=k.join("/"),k&&(k+="/");var l,m=jstack.processTemplate(c,j,k).then(function(a){d[h]=function(b){var d=a(b);c.html(d),jstack.way.set(i,b)}}),n=function(a){l||(l=!0,a.jstack.bindUpdate=function(){jstack.way.set(i,a.jstack.data)},a.jstack.bindWatch=function(){var b=a.jstack.data;a.jstack.bindUpdate(),jstack.watcher.start(),jstack.watch(b,function(b,c,e,f){jstack.way.set(i+"."+b,e),a.jstack.bindSyncReload&&d[h]()}),jstack.watch(b,function(c,e,f,g){for(var j,k=f.added,l=f.removed,m=0,n=k.length;m<n;m++)jstack.way.set(i+"."+k[m],b[k[m]]);for(var m=0,n=l.length;m<n;m++)jstack.way.set(i+"."+l[m],b[k[m]]);j&&a.jstack.bindSyncReload&&d[h]()},0,!0)},a.jstack.bindSync&&a.jstack.bindWatch())},o=$.Deferred(),p=function(){var b=jstack.controller(h);return b||console.log('jstack controller "'+h+'" not found as expected (or parse error) in "'+a.controllersPath+h+'"'),n(b),b.jstack.render=function(a){a||(a={}),b.jstack.data=a;d[h](b.jstack.data);return g.push([c,b]),o.resolve(),a},b.jstack.element=c,b},q=$.Deferred(),r=$.Deferred();$.when(q,r).then(function(){var c=p();e++,e==f&&$.when(o).then(function(){$("[j-view]").html(b.contents()),a.renderCallback&&$.each(g,function(b,c){a.renderCallback.apply(a,c)})}),c()}),m.then(function(){r.resolve()}),$js.onExists(a.controllersPath+h,function(){q.resolve()},function(){a.defaultController(h),q.resolve()})})}}(),function(a,b){var c=function(b){for(var c=[],d=a.param(b).split("&"),e=0;e<d.length;e++){var f=d[e].split("="),g=null!==f[1]?decodeURIComponent(f[1]):"";c.push([decodeURIComponent(f[0]),g])}return c},d=function(b,c,e,f){e||(e="");for(var g in b)if(b.hasOwnProperty(g)){var h=e+g,i=b[g];if(i instanceof FileList){if(1==i.length)c[h]=i[0];else{c[h]=[];for(var j=0;j<i.length;j++)c[h].push(i[j])}delete b[g]}else i instanceof a?b[g]=i.jsonml():i instanceof HTMLCollection||i instanceof HTMLElement?b[g]=a(i).jsonml():"object"==typeof i&&d(i,c,h+"_",f+1)}},e=function(a){for(var b in a)jstack.hasOwnProperty2(a,b)&&("undefined"==typeof a[b]||null===a[b]?a[b]="":"object"==typeof a[b]&&(a[b]=e(a[b])));return a};b.ajax=function(){var b,f={};if(2==arguments.length?(b=arguments[1]||{},b.url=arguments[0]):b=arguments[0],b.data&&d(b.data,f),!a.isEmptyObject(f)){for(var g,h=new FormData,i=c(b.data),j=0;j<i.length;j++)h.append(i[j][0],i[j][1]);for(var k in f)if(f.hasOwnProperty(k)){var l=f[k];if(l instanceof Array)for(var j=0;j<l.length;j++)"undefined"!=typeof l[j]&&(h.append(k+"[]",l[j]),g=!0);else"undefined"!=typeof l&&(h.append(k,l),g=!0)}g&&(b.type="POST",b.processData=!1,b.contentType=!1,b.data=h)}return b.data=e(b.data),a.ajax(b)},b.post=function(a,c,d,e){return b.ajax({type:"POST",url:a,data:c,success:d,dataType:e})}}(jQuery,jstack),jstack.paramsReflection=function(f){var args=f.toString().match(/^\s*function\s+(?:\w*\s*)?\((.*?)\)\s*{/),r={};if(args&&args[1]){args=args[1],args=args.replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,""),args=args.trim().split(/\s*,\s*/);for(var i=0;i<args.length;i++){var arg=args[i],idf=arg.indexOf("=");idf===-1?r[arg]=void 0:r[arg.substr(0,idf)]=eval(arg.substr(idf+1).trim())}}return r},function(a){var b=function(b,c,d){var e={},f=c.attributes,g=d+"-",h=g.length;for(var i in f)if(f.hasOwnProperty(i)){var j=f[i];j.name&&j.name.substr(0,h)==g&&(e[j.name.substr(h).toCamelCase()]=j.value)}c.$js=e;var k=function(){var d,f=$js.module(b),g=[];if(f instanceof Array){var h=f;f=h.pop(),d={};for(var i in h)h.hasOwnProperty(i)&&(d[h[i]]=null)}else d=a.paramsReflection(f);for(var i in d)d.hasOwnProperty(i)&&("$di"==i?g.push(e):"undefined"!=typeof e[i]?g.push(e[i]):g.push(d[i]));f.apply(c,g)};$js.module(b)?k():$js.waitingModule[b]?$js.waitingModule[b](k):$js(b,k)};a.moduleDomNs="js",a.moduleDomPath="js/js-module-dom/",a.moduleDom=function(c,d){c||(c=a.moduleDomPath),d||(d=a.moduleDomNs);for(var e=document.getElementsByTagName("*"),f=0;f<e.length;f++)if(!e[f].$js){var g=e[f].getAttribute(d);g&&b(c+g,e[f],d)}}}(jstack),jstack.replaceAllRegExp=function(a,b,c){return a.replace(new RegExp(b,"g"),c)},jstack.escapeRegExp=function(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},jstack.replaceAll=function(a,b,c){return b=jstack.escapeRegExp(b),jstack.replaceAllRegExp(a,b,c)},jstack.camelCaseDataToObject=function(a,b,c){var d=a.replace(/([A-Z])/g," $1").toLowerCase().split(" ");"undefined"==typeof c&&(c={});var e=c,f=d.length-1;return $.each(d,function(a,c){a==f?e[c]=b:(e[c]||(e[c]={}),e=e[c])}),c},jstack.jml=function(a,b){b||(b={});var c=a.split("/");c.pop(),c=c.join("/")+"/";var d=a,e=$.Deferred();return jstack.getTemplate(a).then(function(a){var f=$("<tmpl>"+a+"</tmpl>");jstack.processTemplate(f,d,c).then(function(a){e.resolve(a(b))})}),e},function(a){a.jsonml=function(b,c){if("undefined"==typeof c&&(c=document),"string"==typeof b)return a(c.createTextNode(b));if(a.isArray(b)){var d=b.length;if(d>=1&&"string"==typeof b[0]){var e=a(c.createElement(b[0]));if(1==d)return e;var f=1;if(a.isPlainObject(b[1])){if(e.attr(b[1]),2==d)return e;f++}for(var g=e.get(0),h=e.is("script")&&!a.support.scriptEval(),i=a.browser.msie&&e.is("object"),j=f;j<d;j++)try{if(h&&"string"==typeof b[j]){g.text=b[j];continue}var k=a.jsonml(b[j],c);if(i){var l=e.get(0);l.innerHTML=l.innerHTML+k.get(0).outerHTML}else k.appendTo(e)}catch(m){throw"Could not insert "+k.get(0).nodeName+" to "+e.get(0).nodeName+": "+m}return e}}throw"Invalid JsonML format: "+b},a.fn.jsonml=function(){var b=[];if(this.length>1)this.each(function(){b.push(a(this).jsonml())});else{var c=this[0];if(!c)return;b.push(c.tagName.toLowerCase());var d,e={};a.each(c.attributes,function(a,b){e[b.name]=b.value,d=!0}),d&&b.push(e);this.children().each(function(){b.push(a(this).jsonml())})}return b}}(jQuery),String.prototype.trim=function(a){return trim(this,a)},String.prototype.ltrim=function(a){return ltrim(this,a)},String.prototype.rtrim=function(a){return rtrim(this,a)},String.prototype.camelCase=function(){return this.replace(/(\_[a-z])/g,function(a){return a.toUpperCase().replace("_","")})},String.prototype.snakeCase=function(){return this.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()})},String.prototype.camelCaseDash=function(){return this.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})},String.prototype.snakeCaseDash=function(){return this.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},String.prototype.lcfirst=function(){return this.charAt(0).toLowerCase()+this.substr(1)},String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.substr(1)},function(a,b){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("jquery");b(exports,c)}else b(a,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b){function c(a,c){function e(a,b,c){return a[b]=c,a}function f(a,b){for(var c,f=a.match(d.key);void 0!==(c=f.pop());)if(d.push.test(c)){var h=g(a.replace(/\[\]$/,""));b=e([],h,b)}else d.fixed.test(c)?b=e([],c,b):d.named.test(c)&&(b=e({},c,b));return b}function g(a){return void 0===n[a]&&(n[a]=0),n[a]++}function h(a){switch(b('[name="'+a.name+'"]',c).attr("type")){case"checkbox":return"on"===a.value||a.value;default:return a.value}}function i(b){if(!d.validate.test(b.name))return this;var c=f(b.name,h(b));return m=a.extend(!0,m,c),this}function j(b){if(!a.isArray(b))throw new Error("formSerializer.addPairs expects an Array");for(var c=0,d=b.length;c<d;c++)this.addPair(b[c]);return this}function k(){return m}function l(){return JSON.stringify(k())}var m={},n={};this.addPair=i,this.addPairs=j,this.serialize=k,this.serializeJSON=l}var d={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return c.patterns=d,c.serializeObject=function(){return new c(b,this).addPairs(this.serializeArray()).serialize()},c.serializeJSON=function(){return new c(b,this).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof b.fn&&(b.fn.serializeObject=c.serializeObject,b.fn.serializeJSON=c.serializeJSON),a.FormSerializer=c,c}),function(a){a.fn.changeVal=function(b){return a(this).val(b).trigger("change")},a.uniqid=function(){var b;do b=uniqid("uid-");while(a("#"+b).length);return b},a.fn.getId=function(b){var c=this.attr("id");return c&&!b||(c=a.uniqid(),this.attr("id",c)),c},a.fn.serializeAssoc=function(){var b={};return this.each(function(){a.each(a(this).serializeArray(),function(a,c){b[c.name]=c.value})}),b},a.fn.hasVerticalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollHeight>this.innerHeight()},a.fn.hasHorizontalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollWidth>this.innerWidth()},a.fn.attrParams=function(b){b||(b="data");var c={},d=b.length;return this.each(function(){a.each(this.attributes,function(){var e=this.name,f=this.value;e.substr(0,d)==b&&(e=e.substr(d+1),e=e.camelCaseDash(),e=e.lcfirst(),"true"==f?f=!0:"false"==f?f=!1:a.isNumeric(f)&&(f=parseInt(f,10)),c[e]=f)})}),c},a.extend(a.expr[":"],{scrollable:function(b){var c,d;return"scroll"==a(b).css("overflow")||"scroll"==a(b).css("overflowX")||"scroll"==a(b).css("overflowY")||((c=b.clientHeight<b.scrollHeight&&(a.inArray(a(b).css("overflowY"),["scroll","auto"])!=-1||a.inArray(a(b).css("overflow"),["scroll","auto"])!=-1))||(d=b.clientWidth<b.scrollWidth&&(a.inArray(a(b).css("overflowX"),["scroll","auto"])!=-1||a.inArray(a(b).css("overflow"),["scroll","auto"])!=-1)))},parents:function(b,c,d){return a(b).parents(d[3]).length<1}});var b={"nth-level":function(b,c){c=parseInt(c,10);var d=[],e=this;return this.each(function(){c+a(this).parents(b).length;e.find(b).each(function(){a(this).parents(b).length==c-1&&d.push(this)})}),a(d)}};a.fn.findOrig=a.fn.find,a.fn.find=function(c){if("string"==typeof c){var d,e=this;if(a.each(b,function(a,f){var g=c.indexOf(":"+a);if(g!==-1){var h=a.length,i=c.substr(0,g),j=c.substr(g+h+2,c.length-g-h-3);return d=b[a].call(e,i,j),!1}}),d)return d}return this.findOrig(c)},a.fn.populateForm=function(b,c){c=a.extend({addMissingOption:!1,not:!1,notContainer:!1},c);var d=this,e=function(b,d){var e=!1;return b.hasClass("select2-hidden-accessible")?void b.val(d).trigger("change"):b[0].hasAttribute("data-preselect")?void b.attr("data-preselect",d):(a("option",b).each(function(){a(this).val()==d&&(a(this).prop("selected",!0),e=!0)}),void(!e&&c.addMissingOption&&(b.append('<option value="'+d+'" selected="selected">'+d+"</option>"),a(this).prop("selected",!0))))};return a.each(b,function(b,f){d.find('[name="'+b+'"]').each(function(){var b=a(this);if(!(c.not&&b.is(c.not)||c.notContainer&&b.closest(c.notContainer).length))if(b.is("select"))if(f instanceof Array)for(var d=0,g=f.length;d<g;d++)e(b,f[d]);else e(b,f);else if(b.is("textarea"))b.val(f);else switch(b.attr("type")){case"text":case"hidden":b.val(f);break;case"radio":b.length>=1&&a.each(b,function(b){var c=a(this).attr("value");singleVal=f;c===f?a(this).prop("checked",!0):a(this).prop("checked",!1)});break;case"checkbox":b.length>1?a.each(b,function(b){for(var c,d=a(this).attr("value"),e=void 0,g=0;g<f.length;g++)c=f[g],c===d&&(e=c);e?a(this).prop("checked",!0):a(this).prop("checked",!1)}):1==b.length&&($ctrl=b,f?$ctrl.prop("checked",!0):$ctrl.prop("checked",!1))}})}),this},a.fn.childrenHeight=function(b,c,d){var e=bottomOffset=0;"undefined"==typeof b&&(b=!0),"undefined"==typeof c&&(c=!0),"undefined"==typeof d&&(d=!0);var f=this.children();return d&&(f=f.filter(":visible")),f.each(function(d,f){var g=a(f),h=g.offset().top,i=h+(b?g.outerHeight(c):g.height());h<e&&(e=h),i>bottomOffset&&(bottomOffset=i)}),bottomOffset-e-this.offset().top},a.fn.findExclude=function(b,c,d){var e=a([]);return a(this).each(function(f,g){a(g).find(b).each(function(b,f){var h=a(f);d&&(h=h.parent());var i=h.closest(c);i[0]!=g&&i.length||(e=e.add(f))})}),e},a.fn.removeCss=function(b){var c=new RegExp(b+"[^;]+;?","g");return this.each(function(){var b=a(this).attr("style");b&&a(this).attr("style",b.replace(c,""))})},a.fn.removeClassPrefix=function(b){return this.each(function(c,d){var e=d.className.split(" ").filter(function(a){return 0!==a.lastIndexOf(b,0)});d.className=a.trim(e.join(" "))}),this},a.fn.setVal=a.fn.val,a.fn.val=function(){var b=a.fn.setVal.apply(this,arguments);return arguments.length&&this.trigger("val"),b};var c=function(b,c){return"undefined"==typeof c&&(c="suspend"),c&&(b=b.split(" "),a.each(b,function(a,d){b[a]=d+"."+c}),b=b.join(" ")),b};a.fn.suspendEvent=function(a,b){return a=c(a,b),this.on(a,function(a){a.stopPropagation()})},a.fn.resumeEvent=function(a,b){return a=c(a,b),this.off(a)}}(jQuery),function(j,$){var getVal=function(a){var b=a.val();return a.is("input[type=checkbox]")?!!a.prop("checked")&&b:b};$.fn.dataIf=function(options){options=$.extend({closestSelector:"form"},options||{});var uid=uniqid("data-if");return this.each(function(){var self=$(this);self.find("[data-if]").each(function(){var $this=$(this),dataIf=$this.attr("data-if"),match=dataIf.match(/\${\s*[\w\.]+\s*}\$/g);dataIf=dataIf.replace(/\$\{/g,"getVal($this.closest('"+options.closestSelector+"').find('[name=\""),dataIf=dataIf.replace(/\}\$/g,"\"]:eq(0)'))");var showOrHide=function(){var ok=eval(dataIf);ok?($this.show(),$this.attr("data-if-ok","true"),$this.trigger("data-if:show")):($this.hide(),$this.attr("data-if-ok","false"),$this.trigger("data-if:hide"))};match&&$.each(match,function(a,b){var c=b.match(/[\w\.]+/)[0],d=$this.closest(options.closestSelector).find('[name="'+c+'"]:eq(0)');d.data(uid)||(d.data(uid,!0),d.on("input change val",function(a){options.onChange&&options.onChange.call(self),$this.trigger("data-if:change")})),d.on("input change val",function(){showOrHide()})}),showOrHide()}),options.onShow&&self.on("data-if:show","[data-if]",options.onShow),options.onHide&&self.on("data-if:hide","[data-if]",options.onHide)})}}(jstack,jQuery),jstack.json_encode=function(a){var b="undefined"!=typeof window?window:GLOBAL;b.$locutus=b.$locutus||{};var c=b.$locutus;c.php=c.php||{};var d,e=b.JSON;try{if("object"==typeof e&&"function"==typeof e.stringify){if(d=e.stringify(a),void 0===d)throw new SyntaxError("json_encode");return d}var f=a,g=function(a){var b=["\0-","-","­","؀-؄","܏","឴","឵","‌-‏","\u2028- ","⁠-⁯","\ufeff","￰-￿"].join(""),c=new RegExp('[\\"'+b+"]","g"),d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return c.lastIndex=0,c.test(a)?'"'+a.replace(c,function(a){var b=d[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},h=function(a,b){var c="",d="    ",e=0,f="",i="",j=0,k=c,l=[],m=b[a];switch(m&&"object"==typeof m&&"function"==typeof m.toJSON&&(m=m.toJSON(a)),typeof m){case"string":return g(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(c+=d,l=[],"[object Array]"===Object.prototype.toString.apply(m)){for(j=m.length,e=0;e<j;e+=1)l[e]=h(e,m)||"null";return i=0===l.length?"[]":c?"[\n"+c+l.join(",\n"+c)+"\n"+k+"]":"["+l.join(",")+"]",c=k,i}for(f in m)Object.hasOwnProperty.call(m,f)&&(i=h(f,m),i&&l.push(g(f)+(c?": ":":")+i));return i=0===l.length?"{}":c?"{\n"+c+l.join(",\n"+c)+"\n"+k+"}":"{"+l.join(",")+"}",c=k,i;case"undefined":case"function":default:throw new SyntaxError("json_encode")}};return h("",{"":f})}catch(i){if(!(i instanceof SyntaxError))throw new Error("Unexpected error type in json_encode()");return c.php.last_error_json=4,null}},function(a,b,c){"use strict";var d=function(){function e(a){return!!(a&&"object"==typeof a&&"nodeType"in a&&1===a.nodeType)}function f(a){return a&&"object"==typeof a?Object.keys(a).filter(function(a){return!isNaN(parseInt(a,10))}).splice(-1)[0]:c}function g(a){var b=f(a);return"string"==typeof b?parseInt(b,10):0}function h(a){var b=f(a);return"string"==typeof b?parseInt(b,10)+1:0}function i(a){if("object"!=typeof a||null===a)return 0;var b,c=0;if("function"==typeof Object.keys)c=Object.keys(a).length;else for(b in a)a.hasOwnProperty(b)&&c++;return c}function j(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function k(a,b){if([].forEach)return[].forEach.call(a,b);var c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.call(a,a[c])}function l(a){return!(!a||"object"!=typeof a||!a[0])&&(D=a[0],"undefined"!=typeof a[1]&&i(a[1])>0&&j(E,a[1]),!!m()&&(!!o()&&B()))}function m(){switch(typeof D){case"string":G=b.getElementById(D);break;case"object":e(D)&&(G=D)}return G}function n(){return!(!G.enctype||"multipart/form-data"!==G.enctype)}function o(){return H=G.querySelectorAll("input, textarea, select"),H.length}function p(a){return"INPUT"===a.nodeName&&"radio"===a.type}function q(a){return"INPUT"===a.nodeName&&"checkbox"===a.type}function r(a){return"INPUT"===a.nodeName&&"file"===a.type}function s(a){return"TEXTAREA"===a.nodeName}function t(a){return"SELECT"===a.nodeName&&"select-one"===a.type}function u(a){return"SELECT"===a.nodeName&&"select-multiple"===a.type}function v(a){return"BUTTON"===a.nodeName&&"submit"===a.type}function w(a){return a.checked}function x(b){return a.FileList&&b.files instanceof a.FileList}function y(a){if(p(a))return!!w(a)&&a.value;if(q(a))return!!w(a)&&a.value;if(r(a))return!!n()&&(x(a)&&a.files.length>0?a.files:!(!a.value||""===a.value)&&a.value);if(s(a))return!(!a.value||""===a.value)&&a.value;if(t(a))return a.value&&""!==a.value?a.value:!(!a.options||!a.options.length||""===a.options[0].value)&&a.options[0].value;if(u(a)){if(a.options&&a.options.length>0){var b=[];return k(a.options,function(a){a.selected&&b.push(a.value)}),E.includeEmptyValuedElements?b:!!b.length&&b}return!1}return v(a)?a.value&&""!==a.value?a.value:!(!a.innerText||""===a.innerText)&&a.innerText:"undefined"!=typeof a.value&&(E.includeEmptyValuedElements?a.value:""!==a.value&&a.value)}function z(a,b,c,d){var e=b[0];if(p(a))return c!==!1?(d[e]=c,c):void 0;if(u(a)){if(c===!1)return;d[e]=c}return d[e]=c,c}function A(a,b,c,d){var e=b[0];return b.length>1?"[]"===e?(d[h(d)]={},A(a,b.splice(1,b.length),c,d[g(d)])):d[e]&&i(d[e])>0?A(a,b.splice(1,b.length),c,d[e]):(d[e]={},A(a,b.splice(1,b.length),c,d[e])):1===b.length?"[]"===e?(d[h(d)]=c,d):(z(a,b,c,d),d):void 0}function B(){var a,b,c,d,e=0,f={};for(e=0;e<H.length;e++)b=H[e],!b.name||""===b.name||b.disabled||p(b)&&!w(b)||(c=y(b),(c!==!1||E.includeEmptyValuedElements)&&(a=b.name.match(F),1===a.length&&z(b,a,c?c:"",f),a.length>1&&A(b,a,c?c:"",f)));return d=i(f),d>0&&f}if(!(this instanceof d)){var C=new d;return C.init.call(C,Array.prototype.slice.call(arguments))}var D=null,E={includeEmptyValuedElements:!1,w3cSuccessfulControlsOnly:!1},F=/[^\[\]]+|\[\]/g,G=null,H=[];return{init:l}};jstack.formToObject=d,$.fn.toObject=function(){return d(this.get(0))}}(window,document);