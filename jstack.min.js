jstackClass=function(){this.config={templatesPath:"view-js/",controllersPath:"controller-js/",defaultController:{},defaultTarget:"[j-app]",debug:$js.dev},this.controllers={}},jstackClass.prototype.extend=function(a,b){a.prototype=Object.create(b.prototype)},jstack=new jstackClass,function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.ObjectObservable=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;i<d;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;i<d;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],2:[function(a,b,c){var d=a("asap"),e=a("events"),f="__OBJECT_OBSERVABLE__PREFIX__"+new Date+"__",g={};g.create=function(a,b){function c(a){var b=function(b){l(b,a)};return k[a]=b,b}arguments.length||(a={});var b=Object.assign({},{clone:!1,recursive:!0},b),h=new e,i=[],j=!1,k=new WeakMap,l=function(a,b){var c=Object.assign({},a);b&&(c.path=a.path?b+"."+a.path:b),i.push(c),h.emit("change",c),j||(d(function(){h.emit("changes",i),j=!1,i=[]}),j=!0)},m=a;if(b.recursive)if(Array.isArray(a)){b.clone&&(m=[]);for(var n=0;n<a.length;++n){var o=a[n];"object"==typeof o&&o&&(g.isObservable(o)||(o=g.create(o),m[n]=o),g.observeInmediate(o,c(n)))}}else{b.clone&&(m={});for(var p in a)if(a.hasOwnProperty(p)){var o=a[p];"object"==typeof o&&o&&(g.isObservable(o)||(o=g.create(o),m[p]=o),g.observeInmediate(o,c(p)))}}return new Proxy(m,{get:function(a,b){return b===f?h:a[b]},set:function(a,d,e){var f=a[d],h=k[d];return f&&h&&g.unobserveInmediate(f,h),b.recursive&&"object"==typeof e&&e?(g.isObservable(e)||(e=g.create(e)),a[d]=e,g.observeInmediate(e,c(d))):a[d]=e,l({type:"set",target:a,key:d,value:e,old:f},d),e},deleteProperty:function(a,b){var c=a[b],d=k[b];return c&&d&&g.unobserveInmediate(c,d),c=Array.isArray(a)?a.splice(b,1):delete a[b],l({type:"deleteProperty",target:a,key:b},b),c},has:function(a,b){return f===b||b in a}})},g.isObservable=function(a){return"object"==typeof a&&a&&f in a},g.observe=function(a,b){var c=a[f];if(!c)throw new Error("Object is not observable");return c.addListener("changes",b),b},g.once=function(a,b){var c=a[f];if(!c)throw new Error("Object is not observable");return c.once("changes",b),b},g.unobserve=function(a,b){var c=a[f];if(!c)throw new Error("Object is not observable");c.removeListener("changes",b)},g.observeInmediate=function(a,b){var c=a[f];if(!c)throw new Error("Object is not observable");c.addListener("change",b)},g.unobserveInmediate=function(a,b){var c=a[f];if(!c)throw new Error("Object is not observable");return c.removeListener("change",b)},b.exports=g},{asap:3,events:1}],3:[function(a,b,c){"use strict";function d(){if(i.length)throw i.shift()}function e(a){var b;b=h.length?h.pop():new f,b.task=a,g(b)}function f(){this.task=null}var g=a("./raw"),h=[],i=[],j=g.makeRequestCallFromTimer(d);b.exports=e,f.prototype.call=function(){try{this.task.call()}catch(a){e.onerror?e.onerror(a):(i.push(a),j())}finally{this.task=null,h[h.length]=this}}},{"./raw":4}],4:[function(a,b,c){(function(a){"use strict";function c(a){h.length||(g(),i=!0),h[h.length]=a}function d(){for(;j<h.length;){var a=j;if(j+=1,h[a].call(),j>k){for(var b=0,c=h.length-j;b<c;b++)h[b]=h[b+j];h.length-=j,j=0}}h.length=0,j=0,i=!1}function e(a){var b=1,c=new l(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function f(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}b.exports=c;var g,h=[],i=!1,j=0,k=1024,l=a.MutationObserver||a.WebKitMutationObserver;g="function"==typeof l?e(d):f(d),c.requestFlush=g,c.makeRequestCallFromTimer=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)}),function(){var a=function(a,b){var c=this,d=b.data("jModel")||{};if(b[0].hasAttribute("j-view-inherit")){var e=b.parent().closest("[j-controller]");if(e.length&&b[0].hasAttribute("j-view-inherit")){var f=b[0].getAttribute("j-view-inherit"),g=e.data("jModel")||{};f?d[f]=g:d=$.extend({},g,d)}}var h={domReady:function(){},setData:function(){}};$.extend(!0,this,h,a),this.element=b,this.data=d,b.data("jController",this),this.startDataObserver=function(){c.data;c.data=ObjectObservable.create(c.data),ObjectObservable.observe(c.data,function(a){jstack.dataBinder.update()})},this.setDataArguments=[],this.setDataCall=function(){var a=this.setData.apply(this,this.setDataArguments);0==a?this.noRender=!0:"object"==$.type(a)&&a!==ctrl.data&&$.extend(this.data,a),this.startDataObserver()},this.render=function(a){if(!this.noRender){var b=this.element;b.data("jModel",this.data),b[0].setAttribute("j-controller",this.name),a=$(a);var d=$.Deferred();a.data("j:ready",d),Boolean(b[0].getAttribute("j-view-append"))?b.append(a):b.html(a),d.then(function(){c.domReady()})}}};jstack.controller=function(b,c){if("object"==typeof b){if(b.extend){b.dependencies||(b.dependencies=[]);var d=$.Deferred();b.dependencies.push(d);var e=jstack.config.controllersPath+b.extend;$js.require(e),$js(e,function(){$.each(jstack.controllers[b.extend],function(a,c){"undefined"==typeof b[a]&&(b[a]=c)}),d.resolve()})}if(b.mixins)for(var f=0,g=mixins.length;f<g;f++)$.each(mixins[f],function(a,c){"undefined"==typeof b[a]&&(b[a]=c)});return jstack.controllers[b.name]=b,jstack.controllers[b.name]}var h=jstack.controllers[b]||jstack.controller($.extend(!0,{name:b},jstack.config.defaultController)),i=(h.name,$.Deferred()),j=[];if(h.dependencies&&h.dependencies.length){var k=$.Deferred();$js(h.dependencies,function(){k.resolve()}),j.push(k)}return $.when.apply($,j).then(function(){var b=new a(h,c),d=[],e=b.dependenciesData;if(e&&("function"==typeof e&&(b.dependenciesData=e=b.dependenciesData()),e&&e.length)){for(var f=[],g=0,j=e.length;g<j;g++){var k=e[g];if("function"==typeof k&&(k=k.call(b)),"object"==$.type(k)&&"abort"in k){var l=k;k=$.Deferred(),function(a){l.then(function(b){a.resolve(b)})}(k)}if(!("object"==$.type(k)&&"then"in k)){var l=k;k=$.Deferred(),k.resolve(l)}f.push(k)}var m=$.when.apply($,f).then(function(){for(var a=0,c=arguments.length;a<c;a++)b.setDataArguments.push(arguments[a])});d.push(m)}$.when.apply($,d).then(function(){b.setDataCall(),i.resolve(b)})}),i.promise()}}(),jstack.url=function(){var Url=function(){},recursiveArrayToObject=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(a[c]instanceof Array?b[c]=recursiveArrayToObject(a[c]):b[c]=a[c]);return b};return Url.prototype.params=new Array,Url.prototype.getQuery=function(a){var b=a,c=b.indexOf("?");return c==-1?"":(b=b.substr(c+1,b.length),c=b.indexOf("#"),c==-1?b:b.substr(0,c))},Url.prototype.getPath=function(a){var b=a.indexOf("?");return b==-1?a:a.substr(0,b)},Url.prototype.buildParamFromString=function(param){var p=decodeURIComponent(param),strpos=p.indexOf("=");if(strpos==-1)return""!==p&&(this.params[p]="",this.params.length++),!0;var name=p.substr(0,strpos),value=p.substr(strpos+1,p.length),openBracket=name.indexOf("["),closeBracket=name.indexOf("]");if(openBracket==-1||closeBracket==-1)return openBracket==-1&&closeBracket==-1||(name=name.replace(new RegExp("[\\[\\]]"),"_")),this.params[name]=value,!0;var matches=name.match(new RegExp("\\[.*?\\]","g"));name=name.substr(0,openBracket),p="this.params";var key=name;for(var i in matches)matches.hasOwnProperty(i)&&(p+="['"+key+"']",void 0!=eval(p)&&"object"==typeof eval(p)||eval(p+"= new Array();"),key=matches[i].substr(1,matches[i].length-2),""==key&&(key=eval(p).length));p+="['"+key+"']",eval(p+"= '"+value+"';")},Url.prototype.parseQuery=function(a){var b=a;b=b.replace(new RegExp("&"),"&"),this.params=new Array,this.params.length=0,b=b.split("&");for(var c=0;c<b.length;c++)this.buildParamFromString(b[c]);return recursiveArrayToObject(this.params)},Url.prototype.buildStringFromParam=function(a,b){var c="",d="";if(void 0!=b&&(c=b),"object"==typeof a)for(var e in a)d=a[e],e=""==c?e:"["+e+"]","object"==typeof d?this.buildStringFromParam(d,c+e):this.params[this.params.length]=c+e+"="+d},Url.prototype.buildQuery=function(a){return this.params=new Array,this.buildStringFromParam(a),this.params.join("&")},Url.prototype.getParams=function(a){return this.parseQuery(this.getQuery(a))},Url.prototype.getParamsFromHash=function(){return this.getParams(document.location.hash)},new Url}(),jstack.uniqid=function(a,b){"undefined"==typeof a&&(a="");var c,d=function(a,b){return a=parseInt(a,10).toString(16),b<a.length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,c=a,c+=d(parseInt((new Date).getTime()/1e3,10),8),c+=d(this.php_js.uniqidSeed,5),b&&(c+=(10*Math.random()).toFixed(8).toString()),c},jstack.isPositiveInteger=function(a){return 0===a%(!isNaN(parseFloat(a))&&0<=~~a)},jstack.isIntKey=function(a){return a>>>0===parseFloat(a)},jstack.arrayRemove=function(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=b<0?a.length+b:b,Array.prototype.push.apply(a,d)},jstack.flatObservable=function(){for(var a=[],b=0,c=arguments.length;b<c;b++){var d=arguments[b];d=JSON.parse(JSON.stringify(d)),a.push(d)}return a},jstack.log=function(){console.log((new Error).stack.split("\n")[1]);var a=jstack.flatObservable.apply(jstack,arguments);console.log.apply(console,a)},String.prototype.camelCase=function(){return this.replace(/(\_[a-z])/g,function(a){return a.toUpperCase().replace("_","")})},String.prototype.camelCaseDash=function(){return this.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})},String.prototype.lcfirst=function(){return this.charAt(0).toLowerCase()+this.substr(1)},String.prototype.escapeRegExp=function(){return this.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},String.prototype.replaceAllRegExp=function(a,b){return this.replace(new RegExp(a,"g"),b)},String.prototype.replaceAll=function(a,b){return a=a.escapeRegExp(),this.replaceAllRegExp(a,b)},String.prototype.snakeCase=function(){return this.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()})},String.prototype.snakeCaseDash=function(){return this.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},function(){function a(a,b){var c=[" ","\n","\r","\t","\f","\x0B"," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029","　"].join(""),d=0,e=0;for(a+="",b&&(c=(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"$1")),d=a.length,e=0;e<d;e++)if(c.indexOf(a.charAt(e))===-1){a=a.substring(e);break}for(d=a.length,e=d-1;e>=0;e--)if(c.indexOf(a.charAt(e))===-1){a=a.substring(0,e+1);break}return c.indexOf(a.charAt(0))===-1?a:""}function b(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"$1"):" \\s ";var c=new RegExp("^["+b+"]+","g");return(a+"").replace(c,"")}function c(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^:])/g,"\\$1"):" \\s ";var c=new RegExp("["+b+"]+$","g");return(a+"").replace(c,"")}String.prototype.trim=function(b){return a(this,b)},String.prototype.ltrim=function(a){return b(this,a)},String.prototype.rtrim=function(a){return c(this,a)}}(),String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.substr(1)},jstack.reflection={},jstack.reflection.arguments=function(f){var args=f.toString().match(/^\s*function\s+(?:\w*\s*)?\((.*?)\)\s*{/),r={};if(args&&args[1]){args=args[1],args=args.replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,""),args=args.trim().split(/\s*,\s*/);for(var i=0;i<args.length;i++){var arg=args[i],idf=arg.indexOf("=");idf===-1?r[arg]=void 0:r[arg.substr(0,idf)]=eval(arg.substr(idf+1).trim())}}return r},jstack.reflection.isCyclic=function(a){function b(a,g){if("object"==typeof a){if(e.has(a)){var h=d.indexOf(a),i=c.join(".")+"."+g,j=c.slice(0,h+1).join(".");return console.log("CIRCULAR: "+i+" = "+j+" = "+a),console.log(a),void(f=!0)}c.push(g),d.push(a),e.add(a);for(var k in a)a.hasOwnProperty(k)&&b(a[k],k);c.pop(),d.pop(),e["delete"](a)}}var c=[],d=[],e=new Set,f=!1;return b(a,"obj"),f},jstack.traverseDomBreak={DESC:2,ASC:4,ADJ:8,BOTH:6,ALL:14},jstack.traverseDom=function(a,b,c){var d;if(c||(d=b(a)),c||!(d&jstack.traverseDomBreak.DESC))for(var e=a.childNodes,f=0;f<e.length;f++)if(e[f]){var g=this.traverseDom(e[f],b);if(g&jstack.traverseDomBreak.ASC&&(d|=g),g&jstack.traverseDomBreak.ADJ)break}return!c||d&jstack.traverseDomBreak.ASC||(d=b(a)),d},jstack.walkTheDOM=function(a,b){if(b(a)!==!1)for(var c=a.childNodes,d=0;d<c.length;d++)c[d]&&this.walkTheDOM(c[d],b)},$.arrayCompare=function(a,b){return 0===$(a).not(b).get().length&&0===$(b).not(a).get().length},$.fn.attrStartsWith=function(a){var b={};return this.each(function(c){$.each(this.attributes,function(c,d){0===d.name.indexOf(a)&&(b[d.name]=d.value)})}),b},$.attrsToObject=function(a,b,c){c||(c={});var d=a.split("--");"undefined"==typeof c&&(c={});var e=c,f=d.length-1;return $.each(d,function(a,c){c=$.camelCase(c),a==f?e[c]=b:(e[c]||(e[c]={}),e=e[c])}),c},$.fn.changeVal=function(a){return $(this).val(a).trigger("change")},$.fn.childrenHeight=function(a,b,c){var d=bottomOffset=0;"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0),"undefined"==typeof c&&(c=!0);var e=this.children();return c&&(e=e.filter(":visible")),e.each(function(c,e){var f=$(e),g=f.offset().top,h=g+(a?f.outerHeight(b):f.height());g<d&&(d=g),h>bottomOffset&&(bottomOffset=h)}),bottomOffset-d-this.offset().top},$.fn.dataAttrConfig=function(a){a||(a="data-");var b=a.length,c=this.attrStartsWith(a),d={};return $.each(c,function(a,c){$.attrsToObject(a.substr(b),c,d)}),d},$.fn.findExclude=function(a,b,c){var d=$([]);return $(this).each(function(e,f){$(f).find(a).each(function(a,e){var g=$(e);c&&(g=g.parent());var h=g.closest(b);h[0]!=f&&h.length||(d=d.add(e))})}),d},$.fn.hasHorizontalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollWidth>this.innerWidth()},$.fn.hasVerticalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollHeight>this.innerHeight()},function(){var a={"nth-level":function(a,b){b=parseInt(b,10);var c=[],d=this;return this.each(function(){b+$(this).parents(a).length;d.find(a).each(function(){$(this).parents(a).length==b-1&&c.push(this)})}),$(c)}};$.fn.findOrig=$.fn.find,$.fn.find=function(b){if("string"==typeof b){var c,d=this;if($.each(a,function(e,f){var g=b.indexOf(":"+e);if(g!==-1){var h=e.length,i=b.substr(0,g),j=b.substr(g+h+2,b.length-g-h-3);return c=a[e].call(d,i,j),!1}}),c)return c}return this.findOrig(b)}}(),$.on=function(a,b,c){return $(document).on(a,b,c)},$.off=function(a,b,c){return $(document).off(a,b,c)},$.one=function(a,b,c){return $(document).one(a,b,c)},$.extend($.expr[":"],{scrollable:function(a){var b,c;return"scroll"==$(a).css("overflow")||"scroll"==$(a).css("overflowX")||"scroll"==$(a).css("overflowY")||((b=a.clientHeight<a.scrollHeight&&($.inArray($(a).css("overflowY"),["scroll","auto"])!=-1||$.inArray($(a).css("overflow"),["scroll","auto"])!=-1))||(c=a.clientWidth<a.scrollWidth&&($.inArray($(a).css("overflowX"),["scroll","auto"])!=-1||$.inArray($(a).css("overflow"),["scroll","auto"])!=-1)))},parents:function(a,b,c){return $(a).parents(c[3]).length<1},attrStartsWith:function(a,b,c){for(var d=0,e=a.attributes,f=e.length;d<f;d++)if(0===e[d].nodeName.toLowerCase().indexOf(c[3].toLowerCase()))return!0;return!1},attrEndsWith:function(a,b,c){for(var d=0,e=a.attributes,f=e.length;d<f;d++){var g=e[d].nodeName.toLowerCase(),h=c[3].toLowerCase();if(g.length>=h.length&&g.substr(g.length-h.length)===h)return!0}return!1},data:function(a,b,c){return!!$.data(a,c[3])}}),$.fn.removeClassPrefix=function(a){return this.each(function(b,c){var d=c.className.split(" ").filter(function(b){return 0!==b.lastIndexOf(a,0)});c.className=$.trim(d.join(" "))}),this},$.fn.requiredId=function(){if(this.length>1)return this.each(function(){$(this).requiredId()});var a=this[0].id;return a||(a=jstack.uniqid("uid-"),this[0].setAttribute("id",a)),a},$.fn.reverse=function(){return $(this.get().reverse())},$.fn.setVal=$.fn.val,$.fn.val=function(){var a=$.fn.setVal.apply(this,arguments);return arguments.length&&this.trigger("val"),a},function(){var a=function(a,b,c){var d=a.hasClass("select2-hidden-accessible");if(!a[0].hasAttribute("data-preselect")||d){if(d){var e;if(e=c.preventValEvent?function(a,b){a.setVal(b)}:function(a,b){a.val(b)},c.push){var f=a.val();null===f&&(f=[]),"object"!=typeof f&&(f=[f]),f.indexOf(b)===-1&&f.push(b),e(a,b)}else e(a,b);return void(c.preventValEvent||a.trigger("change"))}var g=!1,h="option";if(a.children().each(function(a){var d=$(this);"option"==this.tagName.toLowerCase()?d.val()==b?(d.prop("selected",!0),g=!0):c.push||d.prop("selected",!1):(0==a&&(h=d[0].tagName.toLowerCase()),d[0].getAttribute("value")==b?(d[0].setAttribute("selected","selected"),g=!0):c.push||d[0].removeAttribute("selected"))}),!g&&c.addMissing&&"undefined"!=typeof b&&null!==b){var i,j;"object"==$.type(b)?(i=b.value,j=b.text):i=b,"undefined"==typeof j&&(j=i),i||(i=j),a.append("<"+h+' value="'+i+'" selected="selected">'+j+"</"+h+">")}}else if(c.push){var f=a.data("preselect")||[];"object"!=typeof f&&(f=[f]),f.indexOf(b)===-1&&f.push(b),a.data("preselect",f)}else a.data("preselect",b)};$.fn.populateInput=function(b,c){c=$.extend({addMissing:this[0].hasAttribute("j-add-missing"),preventValEvent:!1,push:!1},c);var d;return d=c.preventValEvent?function(a,b){a.setVal(b)}:function(a,b){a.val(b)},this.each(function(){var e=$(this);if(!e.data("j:populate:prevent")){var f=this.tagName.toLowerCase();if("select"==f||"j-select"==f)if(b instanceof Array)if("[]"==this.getAttribute("name").substr(-2)||this.hasAttribute("multiple"))a(e,b,c);else for(var g=0,h=b.length;g<h;g++)a(e,b[g],c);else a(e,b,c);else if("textarea"==e[0].tagName.toLowerCase())d(e,b);else switch(e[0].getAttribute("type")){case"file":return;default:case"number":case"range":case"email":case"data":case"text":case"hidden":d(e,b);break;case"radio":e.length>=1&&$.each(e,function(a){var d=this.value;singleVal=b;d===b?$(this).prop("checked",!0):c.push||$(this).prop("checked",!1)});break;case"checkbox":e.length>1?$.each(e,function(a){for(var d,e=this.value,f=void 0,g=0;g<b.length;g++)d=b[g],d===e&&(f=d);f?$(this).prop("checked",!0):c.push||$(this).prop("checked",!1)}):1==e.length&&(b?e.prop("checked",!0):e.prop("checked",!1))}}})},$.fn.populateForm=function(a,b){b=$.extend({not:!1,notContainer:!1},b);var c=this,d=function(a,d){null===d&&(d="");var e=c.find(':input[name="'+a+'"]');b.addMissing&&!e.length&&c.append('<input type="hidden" name="'+a+'" value="'+d+'">'),e.each(function(){var a=$(this);b.not&&a.is(b.not)||b.notContainer&&a.closest(b.notContainer).length||a.populateInput(d,b)})},e=function(a,d){var e=c.find(':input[name="'+a+'"],:input[name="'+a+'[]"]');e.each(function(){var a=$(this);b.not&&a.is(b.not)||b.notContainer&&a.closest(b.notContainer).length||a.populateInput(d,b)})},f=function(a,b){e(a,b),$.each(b,function(b,c){var e=a+"["+b+"]";"object"==typeof c&&null!=c?f(e,c):d(e,c)})};return $.each(a,function(a,b){"object"==typeof b&&null!=b?f(a,b):d(a,b)}),this},$.fn.populate=function(a,b){return this.each(function(){"form"==this.tagName.toLowerCase()?$(this).populateForm(a,b):$(this).populateInput(a,b)})},$.fn.populateReset=function(){return this.each(function(){if("form"==this.tagName.toLowerCase())$(this).find(":input[name]").populateReset();else{var a=$(this),b=a.prop("type");"checkbox"==b||"radio"==b?a.prop("checked",this.defaultChecked):a.populateInput(this.defaultValue,{preventValEvent:!0}),a.trigger("input")}})}}(),$.fn.outerHTML=function(){if(this.length){var a=$('<tmpl style="display:none;"></tmpl>'),b=($(this[0].cloneNode(!1)).html(this.html()).appendTo(a),a.html());return a.remove(),b}return null},$.fn.hasAttr=function(a){return this[0].hasAttribute(a)},$.fn.jComponentReady=function(a){var b=this,c=$.Deferred();c.then(a);var d=function(){var a=!0;b.each(function(){if(!$(this).data("j.component.loaded"))return a=!1,!1}),a&&c.resolve()};return this.on("j:component:loaded",function(){d()}),d(),c.promise()};var rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i,rcheckableType=/^(?:checkbox|radio)$/i;jQuery.fn.serializeArrayWithEmpty=function(){return this.map(function(){var a=jQuery.prop(this,"elements");return a?jQuery.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&(this.checked||!rcheckableType.test(a))}).map(function(a,b){var c=jQuery(this).val();return null==c&&(c=""),jQuery.isArray(c)?jQuery.map(c,function(a){return{name:b.name,value:a.replace(rCRLF,"\r\n")}}):{name:b.name,value:c.replace(rCRLF,"\r\n")}}).get()},function(a,b){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("jquery");b(exports,c)}else b(a,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b){function c(a,c){function e(a,b,c){return a[b]=c,a}function f(a,b){for(var c,f=a.match(d.key);void 0!==(c=f.pop());)if(d.push.test(c)){var h=g(a.replace(/\[\]$/,""));b=e([],h,b)}else 0==c?b=e([],c,b):d.named.test(c)&&(b=e({},c,b));return b}function g(a){return void 0===n[a]&&(n[a]=0),n[a]++}function h(a){switch(b('[name="'+a.name+'"]',c)[0].type){case"checkbox":return"on"===a.value||a.value;default:return a.value}}function i(b){if(!d.validate.test(b.name))return this;var c=f(b.name,h(b));return m=a.extend(!0,m,c),this}function j(b){if(!a.isArray(b))throw new Error("formSerializer.addPairs expects an Array");for(var c=0,d=b.length;c<d;c++)this.addPair(b[c]);return this}function k(){return m}function l(){return JSON.stringify(k())}var m={},n={};this.addPair=i,this.addPairs=j,this.serialize=k,this.serializeJSON=l}var d={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,named:/^[a-z0-9_]+$/i};return c.patterns=d,c.serializeObject=function(){return new c(b,this).addPairs(this.serializeArrayWithEmpty()).serialize()},c.serializeJSON=function(){return new c(b,this).addPairs(this.serializeArrayWithEmpty()).serializeJSON()},"undefined"!=typeof b.fn&&(b.fn.serializeObject=c.serializeObject,b.fn.serializeJSON=c.serializeJSON),a.FormSerializer=c,c}),$.prettifyHTML=function(a){if(a=$(a),a.parent().length>0&&a.parent().data("assign")?a.data("assign",a.parent().data("assign")+1):a.data("assign",1),a.children().length>0)a.children().each(function(){for(tbc="",i=0;i<$(this).parent().data("assign");i++)tbc+="\t";$(this).before("\n"+tbc),$(this).prepend("\t"),$(this).append("\n"+tbc),$.prettifyHTML($(this))});else{for(tbc="",i=0;i<a.parent().data("assign");i++)tbc+="\t";a.prepend("\n"+tbc)}return a.outerHTML()},$.fn.replaceTagName=function(a){for(var b=[],c=this.length;c--;){for(var d=document.createElement(a),e=this[c],f=e.attributes,g=f.length-1;g>=0;g--){var h=f[g];d.setAttribute(h.name,h.value)}d.innerHTML=e.innerHTML,$(e).replaceWith(d),b[c]=d}return $(b)},$.fn.jModel=function(a,b){if(this.length<=1){var c=jstack.dataBinder.getControllerData(this);return"undefined"!=typeof a?"undefined"==typeof c[a]?b:c[a]:c}var d=[];return this.each(function(){d.push($(this).jModel(a,b))}),d},$.fn.findComments=function(a){var b=[];return this.each(function(){for(var c=0;c<this.childNodes.length;c++){var d=this.childNodes[c];d.nodeType!==Node.COMMENT_NODE||a&&d.nodeValue.split(" ")[0]!=a?b.push.apply(b,$.fn.findComments.call($(d))):b.push(d)}}),$(b)},$.fn.findCommentsChildren=function(a){var b=[];return this.each(function(){for(var c=0;c<this.childNodes.length;c++){var d=this.childNodes[c];d.nodeType===Node.COMMENT_NODE&&d.nodeValue.split(" ")[0]==a?b.push.apply(b,$(d).commentChildren()):b.push.apply(b,$.fn.findCommentsChildren.call($(d),a))}}),$(b)},$.fn.commentChildren=function(){var a=[];return this.each(function(){for(var b="/"+this.nodeValue.split(" ")[0],c=this.nextSibling;c&&(c.nodeType!==Node.COMMENT_NODE||c.nodeValue!=b);)a.push(c),c=c.nextSibling}),$(a)},$.fn.parentComment=function(a){var b=[];for(n=this[0].previousSibling;n;){if(n.nodeType===Node.COMMENT_NODE&&n.nodeValue.split(" ")[0]===a){b.push(n);break}n=n.previousSibling}return $(b)},$.fn.parentsComment=function(a){var b=[];for(n=this[0].previousSibling;n;)n.nodeType===Node.COMMENT_NODE&&n.nodeValue.split(" ")[0]===a&&(b.push(n),n=n.parentNode),n&&(n=n.previousSibling);return $(b)},$.fn.dataCommentJSON=function(){if(arguments.length>1||"object"==$.type(arguments[0])){var a;if(arguments.length>1)a={},a[arguments[0]]=arguments[1];else var a=arguments[0];return this.each(function(){var b=this.nodeValue.split(" "),c=b.shift(),d=b.length?JSON.parse(b.join(" ")):{};$.extend(d,a),this.nodeValue=c+" "+JSON.stringify(d)})}var b=this[0].nodeValue.split(" ");b.shift();var c=b.length?JSON.parse(b.join(" ")):{};return arguments.length&&(c=c[arguments[0]]),c},function(){var a=0,b={};$.fn.removeDataComment=function(a){var c=this[0],d=c.nodeValue.split(" ");if(d[1]){var e=d[1];b[e]&&(a?b[e][a]&&delete b[e][a]:delete b[e])}},$.fn.dataComment=function(){if(arguments.length>1||"object"==$.type(arguments[0])){var c;if(arguments.length>1)c={},c[arguments[0]]=arguments[1];else var c=arguments[0];return this.each(function(){var a=$(this).dataComment();$.extend(a,c)})}var d,e=this[0],f=e.nodeValue.split(" "),g=f.shift();f.length?d=f[0]:(d=++a,e.nodeValue=g+" "+d),b[d]||(b[d]={});var h=b[d];return arguments.length&&(h=h[arguments[0]]),h}}(),$.fn.jData=function(a){if(this.length>1){var b=[];return this.each(function(){b.push($.fn.jData.call($(this),a))}),b}var b={},c=this[0];$.each(this.attrStartsWith("j-data-"),function(a,d){var e,f=jstack.dataBinder.textTokenizer(d);e=f===!1?d:jstack.dataBinder.compilerAttrRender(c,f),b[a]=e});var d={};return $.each(b,function(a,b){$.attrsToObject(a.substr(7),b,d)}),a&&(d=jstack.dataBinder.dotGet(a,d)),d},function(){var a={},b={};jstack.getTemplate=function(c,d){if(d||(c=jstack.config.templatesPath+c),!b[c]){if($js.dev){var e=(new Date).getTime().toString(),f=c;f.indexOf("_t=")===-1&&(f+=(f.indexOf("?")<0?"?":"&")+"_t="+e)}b[c]=$.Deferred(),$.ajax({url:f,cache:!0,success:function(d){a[c]=d,b[c].resolve(a[c],c)}})}return b[c].promise()}}(),jstack.component={},jstack.loader=function(a,b,c){$.on("j:load",a,function(){b.call(this)}),"function"==typeof c&&$.on("j:unload",a,function(){c.call(this)}),$(a).each(function(){b.call(this)})},jstack.loader(':attrStartsWith("j-on-")',function(){var a=$(this),b=a.attrStartsWith("j-on-");$.each(b,function(b,c){var d=b.substr(5);a[0].removeAttribute(b),a.on(d,function(a){var d=jstack.dataBinder.getControllerObject(this);if("object"!=typeof d.methods||"function"!=typeof d.methods[c])throw new Error('Call to undefined method "'+c+'" by '+b+" and expected in controller "+d.name);var e=d.methods[c];if("function"==typeof e){var f=e.call(d,a,this);return f!==!1&&void 0}})})}),jstack.loader("[j-component]",function(){var a=this,b=$(a),c=a.getAttribute("j-component");if(c&&!a.getAttribute("j-component-handled")){a.setAttribute("j-component-handled","true");var d=b.jData(),e=a.getAttribute("j-params-data"),f=function(){var f,g=jstack.component[c];if(e){var h=[];h.push(a),f=new(Function.prototype.bind.apply(g,h))}else f=new g(a,d);b.data("j:component",f),f.deferred?f.deferred.then(function(){b.data("j.component.loaded",!0),b.trigger("j:component:loaded")}):(b.data("j.component.loaded",!0),b.trigger("j:component:loaded"))};jstack.component[c]?f():$js("jstack."+c,f)}},function(){var a=$(this).data("j:component");a&&"function"==typeof a.unload&&a.unload()}),jstack.route=function(a,b){var c=[],d={},e=function(a,b){this.name=b,this.path=a,this.keys=[],this.fns=[],this.params={},this.regex=f(this.path,this.keys,!1,!1)};e.prototype.addHandler=function(a){this.fns.push(a)},e.prototype.removeHandler=function(a){for(var b=0,c=this.fns.length;b<c;b++){var d=this.fns[b];if(a==d)return void this.fns.splice(b,1)}},e.prototype.run=function(a){for(var b=0,c=this.fns.length;b<c;b++){var d=this.fns[b].apply(this,a);"object"==$.type(d)&&"then"in d?d.then(function(){
$(document).trigger("j:route:loaded")}):$(document).trigger("j:route:loaded")}},e.prototype.match=function(a,b){var c=this.regex.exec(a);if(!c)return!1;for(var d=1,e=c.length;d<e;++d){var f=this.keys[d-1],g="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];f&&(this.params[f.name]=g),b.push(g)}return!0},e.prototype.toURL=function(a){var b=this.path;for(var c in a)b=b.replace("/:"+c,"/"+a[c]);if(b=b.replace(/\/:.*\?/g,"/").replace(/\?/g,""),b.indexOf(":")!=-1)throw new Error("missing parameters for url: "+b);return b};var f=function(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))},g=function(a,b){var f=a.split(" "),g=2==f.length?f[0]:null;a=2==f.length?f[1]:f[0],d[a]||(d[a]=new e(a,g),c.push(d[a])),c=c.sort(function(a,b){return"*"==a.path||c.indexOf(a)>c.indexOf(b)}),d[a].addHandler(b)},h=function(a,c,d){if("function"==typeof c)g(a,c);else if("object"==typeof a)for(var e in a)g(e,a[e]);else if("undefined"==typeof c)h.navigate(a);else if("object"==typeof c){var f={};d&&$.extend(f,v()),$.extend(f,b.getParams(a),c);var i=b.buildQuery(f);i&&(i="?"+i),a=b.getPath(a),h.navigate(a+i)}};h.lookup=function(a,b){for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f.name==a)return f.toURL(b)}},h.remove=function(a,b){var c=d[a];c&&c.removeHandler(b)},h.removeAll=function(){d={},c=[]},h.navigate=function(b,c){c=c||{};var d=c.silent||!1;d&&s(),setTimeout(function(){a.location.hash=b,d&&setTimeout(function(){r()},1)},1)};var i=function(){var b="",c=a.location.hash.substring(1),d=c.indexOf("#");return d!==-1&&(b=c.substr(d+1)),b},j=function(){var b=a.location.hash.substring(1),c=b.indexOf("#");return c!==-1&&(b=b.substr(0,c)),b},k=function(a,b){var c=[];return!!b.match(a,c)&&(b.run(c),!0)},l=function(a){for(var b=0,d=c.length;b<d;b++){var e=c[b];if(k(a,e))return}};h.load=l;var m,n=function(){var a=j();a!=m?(m=a,$(document).trigger("j:route:load"),l(m)):$(document).trigger("j:subroute:change")};h.reload=n;var o=function(b){var c=this.getAttribute("href");if(c)return"/"+c==a.location.pathname?(b.preventDefault(),jstack.route(""),!1):void("##"==c.substr(0,2)&&(b.preventDefault(),q(c.substr(2))))},p=function(b){var c=b+"#"+i();a.location.hash=c},q=function(b){var c=m+"#"+b;a.location.hash=c},r=function(){a.addEventListener?a.addEventListener("hashchange",n,!1):a.attachEvent("onhashchange",n),$(document).on("click","a",o),h.reload()},s=function(){a.removeEventListener?a.removeEventListener("hashchange",n):a.detachEvent("onhashchange",n),$(document).off("click","a",o)};h.start=r,h.stop=s;var t=function(){return b.getQuery(j())},u=function(){return b.getPath(j())},v=function(){return b.getParams(j())},w=function(a){return v()[a]},x=function(){return b.getParams("?"+i())},y=function(a){return x()[a]};h.getHash=j,h.getHash2=i,h.getParams=v,h.getParam=w,h.getSubParams=x,h.getSubParam=y,h.getQuery=t,h.getPath=u,h.setMainHash=p,h.setSubHash=q;var z=document.getElementsByTagName("base")[0];if(z)h.baseHref=z.href;else{var A=window.location,B=A.pathname;B=B.split("/"),B.pop(),B=B.join("/")||"/";var C,D=A.username?A.username+(A.password?":"+A.password:"")+"@":"";C=A.port&&("https"==A.protocol&&"443"!=A.port||"80"!=A.port)?":"+A.port:"",h.baseHref=A.protocol+"//"+D+A.host+C+B}var E=a.location.href;E=E.split("/"),E=E[0]+"//"+E[2],E=h.baseHref.substr(E.length),h.basePath=E;var F=a.location.href.substr(h.baseHref.length),G=F.indexOf("#");return G>-1&&(F=F.substr(0,G)),h.baseLocation=F,h}(window,jstack.url),jstack.ready=function(a){var b=$.Deferred();jstack.dataBinder.deferMutation.push(function(){b.resolve()});var c=$.when(b,jstack.dataBinder.updateDeferStateObserver);return a&&c.then(function(){a()}),c.promise()},jstack.dataBinder=function(){var a=function(){};a.prototype={dotGet:function(a,b,c){return a.split(".").reduce(function(a,b){return"object"==typeof a&&null!==a&&"undefined"!=typeof a[b]?a[b]:c},b)},dotSet:function(a,b,c,d){if("object"==typeof b)return a.split(".").reduce(function(a,b,e,f){return f.length!=e+1?("object"==typeof a[b]&&null!==a[b]||(a[b]={}),a[b]):(d&&a[b]&&(c=a[b]),void(d&&a[b]||(a[b]=c)))},b),c},dotDel:function(a,b,c){a.split(".").reduce(function(a,b,c,d){if("object"==typeof a)return d.length!=c+1?a[b]:void("undefined"!=typeof a[b]&&delete a[b])},b)},getKey:function(a){return a.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").replace(/\[\]/g,".")},getValue:function(a,b,c){var d=this,e=d.getControllerData(a),f="",g=$(a).closest("form[j-name]");return g.length&&(f+=g.attr("j-name")+"."),f+=b,d.dotGet(f,e,c)},getParentsForId:function(a){var b=[];a.hasAttribute&&a.hasAttribute("j-for-id")&&b.push(a);for(var c=a;c;)c.nodeType===Node.COMMENT_NODE&&"j:for:id"===c.nodeValue.split(" ")[0]&&(b.push(c),c=c.parentNode,c.hasAttribute&&c.hasAttribute("j-for-id")&&b.push(c)),c&&(c.previousSibling?c=c.previousSibling:(c=c.parentNode,c&&c.hasAttribute&&c.hasAttribute("j-for-id")&&b.push(c)));return b},getValueEval:function(a,b){var c=this,d=c.getControllerData(a);d=JSON.parse(JSON.stringify(d)),"undefined"==typeof b?b="undefined":null===b?b="null":""==b.trim()?b="undefined":(b=b.replace(/[\r\t\n]/g,""),b=b.replace(/(?:^|\b)(this)(?=\b|$)/g,"$this"));for(var e=(c.getControllerData(a),c.getControllerObject(a)),f=c.getParentsForId(a).reverse(),g=0,h=f.length;g<h;g++){var i=f[g],j=$(i),k=j.parentComment("j:for");if(!k.length)return;var l=k.dataCommentJSON(),m=l.value,n=i.nodeType===Node.COMMENT_NODE,o=n?j.dataComment("j:for:data"):j.data("j:for:data");d[m]=o;var p=l.key,q=l.index;if(q&&(d[q]=j.index()+1),p){var r=n?i.nodeValue.split(" ")[1]:i.getAttribute("j-for-id");d[p]=r}}var s=["$controller","$this","$scope"],t=[e,a,d];$.each(d,function(a,b){s.push(a),t.push(b)}),s.push("return "+b+";");var m;try{var u=Function.apply(null,s);m=u.apply(null,t)}catch(v){if(jstack.config.debug){var w=[v.message,", expression: "+b,"element",a];a.nodeType==Node.COMMENT_NODE&&w.push($(a).parent().get()),console.warn.apply(console,w)}}return"undefined"==typeof m?"":m},getScopedInput:function(a){var b=this,c=$(a),d=a.getAttribute("name"),e=b.getKey(d);if("."==e.substr(-1)&&c.is(":checkbox")){var f,g=b.getController(a);g.find(':checkbox[name="'+d+'"]').each(function(b){if(this===a)return f=b,!1}),e+=f}var h="",i=c.closest("form[j-name]");return i.length&&(h+=i.attr("j-name")+"."),h+=e},getters:{select:function(a){return $(a).val()},input:function(a){var b=$(a).prop("type");return"checkbox"==b||"radio"==b?$(a).prop("checked")?$(a).val():null:"file"==b?a.files:"submit"!=b?$(a).val():void 0},textarea:function(a){return $(a).val()},"j-select":function(a){a=$(a);var b=a[0].hasAttribute("multiple"),c=a.data("preselect");return c||(b&&(c=[]),a.children().each(function(){if(this.hasAttribute("selected")){var a=this.value;if(!b)return c=a,!1;c.push(a)}})),c}},defaultGetter:function(a){return $(a).html()},getInputVal:function(a){var b=a.tagName.toLowerCase(),c=this.getters[b]||this.defaultGetter;return c(a)},inputToModel:function(a,b){var c=$(a),d=this,e=d.getControllerData(a),f=(a.getAttribute("name"),function(){var f=d.getScopedInput(a);h!=g&&(g=h,c.populateInput(g,{preventValEvent:!0}));var i=d.dotGet(f,e);g=d.dotSet(f,e,g),c.trigger("j:input",[g]),"j:update"==b?c.trigger("j:input:update",[g]):c.trigger("j:input:user",[g]),i!==g&&c.trigger("j:change",[g,i])}),g=d.getInputVal(a),h=d.filter(a,g);"object"==typeof h&&null!==h&&"function"==typeof h.promise?h.then(function(a){h=a,f()}):f()},watchersPrimary:0,watchers:{},addWatcher:function(a,b){b||(b=0),this.watchers[b]||(this.watchers[b]={}),this.watchers[b][++this.watchersPrimary]=a},checkRemoved:function(a){for(;a.parentNode;)a=a.parentNode;return $(a).data("j:if:state")!==!1},runWatchers:function(){var a=this;$.each(this.watchers,function(b,c){$.each(c,function(b,d){var e=d();e&&a.checkRemoved(e)&&delete c[b]})})},updateDeferState:0,updateDeferStateObserver:null,update:function(){var a=this;this.updateDeferState++;var b=function(){a.runWatchers(),a.updateDeferState--,0==a.updateDeferState&&(a.updateDeferStateObserver.resolve(),a.updateDeferStateObserver=null)};this.updateDeferStateObserver?this.updateDeferStateObserver.then(function(){b()}):(this.updateDeferStateObserver=$.Deferred(),b())},compileNode:function(a,b){var c=this;jstack.walkTheDOM(a,function(a){if(!document.body.contains(a))return!1;if(c.observe(a)===!1)return!1;var d=$(a);if(a.nodeType==Node.TEXT_NODE&&a instanceof Text){var e=jstack.dataBinder.compilerText.call(a);if(e)for(var f=0,g=e.length;f<g;f++)c.addWatcher(e[f],99),e[f]()}else if(a.nodeType==Node.ELEMENT_NODE){var h=a.hasAttribute("j-once");if(h?(jstack.walkTheDOM(a,function(a){a.nodeType==Node.ELEMENT_NODE&&a.setAttribute("j-once-element","true")}),a.removeAttribute("j-once")):(h=a.hasAttribute("j-once-element"),h&&a.removeAttribute("j-once-element")),$.each(c.compilers,function(b,d){var e=d.match.call(a);if(e){var f=d.callback.call(a,e);f&&(h||c.addWatcher(f,d.level),f())}}),!document.body.contains(a))return!1;if(a.parentNode){var i=$(a.parentNode).data("j:ready");i&&c.deferMutation.push(function(){i.resolve(),$(a.parentNode).removeData("j:ready")})}b.push(function(){a.hasAttribute("j-cloak")&&a.removeAttribute("j-cloak"),d.data("j:load:state")||(d.trigger("j:load"),d.data("j:load:state",!0))})}})},loadingMutation:0,deferMutation:[],loadMutations:function(a){var b=this,c=[];$.each(a,function(a,d){$.each(d.addedNodes,function(a,d){b.compileNode(d,c)}),$.each(d.removedNodes,function(a,c){jstack.walkTheDOM(c,function(a){return a.nodeType===Node.COMMENT_NODE&&b.checkRemoved(a)?($(a).removeDataComment(),!1):a.nodeType!=Node.TEXT_NODE&&(!!$(a).data("j:load:state")&&void $(a).trigger("j:unload"))})})}),setTimeout(function(){if(b.loadingMutation--,0==b.loadingMutation)for(;b.deferMutation.length;)b.deferMutation.pop()();for(var a=0,d=c.length;a<d;a++)c[a]()})},noChildListNodeNames:{area:1,base:1,br:1,col:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,menuitem:1,meta:1,param:1,source:1,track:1,wbr:1,script:1,style:1,textarea:1,title:1,math:1,svg:1},inputPseudoNodeNames:{input:1,select:1,textarea:1},observe:function(a){if(a.nodeType==Node.ELEMENT_NODE){if(a.hasAttribute("j-escape"))return!1;if(!this.noChildListNodeNames[a.tagName.toLowerCase()]){var b=this,c=new MutationObserver(function(a){b.loadingMutation++,setTimeout(function(){b.loadMutations(a)})});c.observe(a,{subtree:!1,childList:!0,characterData:!0,attributes:!1,attributeOldValue:!1,characterDataOldValue:!1}),$(a).data("j:observer",c)}}},eventListener:function(){var a=this;jstack.walkTheDOM(document.body,function(b){return a.observe(b)}),$(document.body).on("input change j:update",":input[name]",function(b){("input"!=b.type||"select"!=this.nodeName.toLowerCase()&&"checkbox"!=this.type&&"radio"!=this.type&&"file"!=this.type)&&a.inputToModel(this,b.type)})},filter:function(a,b){var c=this,d=c.getFilter(a);return"function"==typeof d&&(b=d(b)),b},getFilter:function(a){var b=this;$el=$(a);var c=$el.data("j-filter");if(!c){var d=a.getAttribute("j-filter");if(d){var e=b.getValue(a,d);$el.data("j-filter",e)}}return c},getControllerData:function(a){return this.getController(a).data("jModel")},getController:function(a){var b=$(a).closest("[j-controller]");return b.length||(b=$(document.body),b.attr("j-controller",""),b.data("jModel",{})),b},getControllerObject:function(a){return this.getController(a).data("jController")},inputPseudoNodeNamesExtended:{input:1,select:1,textarea:1,button:1,"j-input":1,"j-select":1},compilers:{jFor:{level:1,match:function(){return this.hasAttribute("j-for")},callback:function(){var a=this,b=$(this),c=$("<!--j:for-->"),d=$("<!--/j:for-->");b.replaceWith(c),d.insertAfter(c);var e=a.getAttribute("j-for");a.removeAttribute("j-for"),e=e.trim();var f,g,h,i,j=new RegExp("(\\()(.*)(,)(.*)(,)(.*)(\\))(\\s+)(in)(\\s+)(.*)",["i"]),k=j.exec(e);if(null!=k)f=k[2].trim(),g=k[4].trim(),h=k[6],i=k[11].trim();else{var j=new RegExp("(\\()(.*)(,)(.*)(\\))(\\s+)(in)(\\s+)(.*)",["i"]),k=j.exec(e);if(null!=k)g=k[2].trim(),h=k[4],i=k[9].trim();else{var j=new RegExp("(.*)(\\s+)(in)(\\s+)(.*)",["i"]),k=j.exec(e);if(null==k)throw new Error("Malformed for clause: "+e);h=k[1],i=k[5].trim()}}var l,m=function(){return jstack.dataBinder.getValueEval(c[0],i)};c.dataCommentJSON({value:h,key:g,index:f});var n;if("template"==a.tagName.toLowerCase()){var o=this.content;n=function(){if(!document.body.contains(c[0]))return c[0];var a=m();if(l!==a){l=a;var b=[],e=$(c.commentChildren().map(function(){if(this.nodeType===Node.COMMENT_NODE&&"j:for:id"==this.nodeValue.split(" ")[0])return this}));$.each(a,function(a,c){var f=$(e.map(function(){if(this.nodeValue=="j:for:id "+a)return this})),g=!f.length;g&&(f=$("<!--j:for:id "+a+"-->")),f.dataComment("j:for:data",c),g&&(f.insertBefore(d),$(document.importNode(o,!0)).insertBefore(d),$("<!--/j:for:id-->").insertBefore(d)),b.push(a.toString())}),e.each(function(){var a=this.nodeValue.split(" ")[1];b.indexOf(a)===-1&&($(this).commentChildren().remove(),$(this).remove())})}}}else n=function(){if(!document.body.contains(c[0]))return c[0];var a=m();if(l!==a){l=a;var e=[],f=c.commentChildren();$.each(a,function(a,c){var g=f.filter('[j-for-id="'+a+'"]'),h=!g.length;h&&(g=b.clone(),g[0].setAttribute("j-for-id",a)),g.data("j:for:data",c),h&&g.insertBefore(d),e.push(a.toString())}),f.each(function(){var a=this.getAttribute("j-for-id");e.indexOf(a)===-1&&$(this).remove()})}};return n}},jIf:{level:2,match:function(){return this.hasAttribute("j-if")},callback:function(){var a=this,b=$(this),c=$("<!--j:if-->");b.before(c);var d=b.nextAll("[j-else-if]"),e=b.nextAll("[j-else]");"template"==this.tagName.toLowerCase()&&(b.detach(),b=$(document.importNode(this.content,!0)));var f;f=e.length?e:d.length?d.last():c,$("<!--/j:if-->").insertAfter(f);var g=a.getAttribute("j-if");a.removeAttribute("j-if");var h,i,j=function(){return Boolean(jstack.dataBinder.getValueEval(c[0],g))},k=null;if(d.length){var l=[];d=$(d.map(function(){l.push(this.getAttribute("j-else-if")),this.removeAttribute("j-else-if");var a=this;return"template"==this.tagName.toLowerCase()&&($(this).detach(),a=document.importNode(this.content,!0)),a})),i=function(){for(var a=!1,b=0,d=l.length;b<d;b++)if(Boolean(jstack.dataBinder.getValueEval(c[0],l[b]))){a=b;break}return a}}e.length&&(e=$(e.map(function(){this.removeAttribute("j-else");var a=this;return"template"==this.tagName.toLowerCase()&&($(this).detach(),a=document.importNode(this.content,!0)),a})));var m=function(){if(!document.body.contains(c[0]))return c[0];var a=j(),f=null;if(i&&(f=!a&&i()),h!==a||f!==k)if(h=a,k=f,b.data("j:if:state",a),a)b.insertAfter(c),d.length&&(d.data("j:if:state",!1),d.detach()),e.length&&(e.data("j:if:state",!1),e.detach());else{if(b.detach(),d.length)if(d.data("j:if:state",!1),f===!1)d.detach();else{var g=$(d[f]);g.data("j:if:state",!0),g.insertAfter(c)}e.length&&(f===!1||null===f?(e.data("j:if:state",!0),e.insertAfter(c)):(e.data("j:if:state",!1),e.detach()))}};return m}},jSwitch:{level:3,match:function(){return this.hasAttribute("j-switch")},callback:function(){var a=this,b=$(this),c=this.getAttribute("j-switch");this.removeAttribute("j-switch");var d,e=b.find("[j-case],[j-case-default]"),f=function(){return Boolean(jstack.dataBinder.getValueEval(a,c))},g=function(){if(!document.body.contains(a))return a;var c=f();if(d!==c){d=c;var g=!1;e.filter("[j-case]").each(function(){var a=$(this),d=this.getAttribute("j-case");d==c?(a.appendTo(b),g=!0):a.detach()}),e.filter("[j-case-default]").each(function(){var a=$(this);g?a.detach():a.appendTo(b)})}};return g}},jShow:{level:4,match:function(){return this.hasAttribute("j-show")},callback:function(){var a=this,b=$(this),c=this.getAttribute("j-show");this.removeAttribute("j-show");var d,e=function(){return Boolean(jstack.dataBinder.getValueEval(a,c))},f=function(){if(!document.body.contains(a))return a;var c=e();d!==c&&(d=c,c?b.show():b.hide())};return f}},jHref:{level:5,match:function(){return this.hasAttribute("j-href")},callback:function(){var a=this,b=($(this),this.getAttribute("j-href"));this.removeAttribute("j-href");var c=jstack.dataBinder.textTokenizer(b);if(c===!1)return void a.setAttribute("href",jstack.route.baseLocation+"#"+b);var d,e=jstack.dataBinder.createCompilerAttrRender(a,c),f=function(){if(!document.body.contains(a))return a;var b=e();d!==b&&(d=b,a.setAttribute("href",jstack.route.baseLocation+"#"+b))};return f}},jTwoPoints:{level:6,match:function(){for(var a,b=0,c=this.attributes,d=c.length;b<d;b++){var e=c[b];":"===e.name.substr(0,1)&&(a||(a={}),a[e.name]=e.value)}return a},callback:function(a){var b=this,c=$(this),d={},e={},f=["selected","checked"];this.nodeName.toLowerCase();$.each(a,function(a,c){var e=jstack.dataBinder.textTokenizer(c),f=a.substr(1);e===!1?b.setAttribute(f,c):d[a]=e,b.removeAttribute(a)});var g=function(){return document.body.contains(b)&&0!=d.length?void $.each(d,function(a,d){var g=jstack.dataBinder.compilerAttrRender(b,d);e[a]!==g&&(e[a]=g,f.indexOf(a)!==-1?c.prop(a,g):"boolean"==typeof g?g?b.setAttribute(a,a):b.removeAttribute(a):b.setAttribute(a,g))}):b};return g}},jInput:{level:8,match:function(){return this.hasAttribute("name")&&jstack.dataBinder.inputPseudoNodeNamesExtended[this.tagName.toLowerCase()]&&"file"!=this.type},callback:function(){var a,b=this,c=$(this),d=jstack.dataBinder.getScopedInput(this),e=jstack.dataBinder.getInputVal(this);jstack.dataBinder.dotSet(d,jstack.dataBinder.getControllerData(b),e,!0);var f=function(){var a=jstack.dataBinder.getInputVal(b),c=jstack.dataBinder.getKey(b.getAttribute("name"));return jstack.dataBinder.getValue(b,c,a)},g=function(){if(!document.body.contains(b))return b;var d=f();a!==d&&(a=d,c.data("j:populate:prevent")||(c.populateInput(d,{preventValEvent:!0}),c.trigger("j:val",[d])))};return g}}},compilerAttrRender:function(a,b){for(var c="",d=0,e=b.length;d<e;d++){var f=b[d];"{{"==f.substr(0,2)&&(f=jstack.dataBinder.getValueEval(a,f.substr(2,f.length-4))),c+=f?f:""}return c},createCompilerAttrRender:function(a,b){return function(){return jstack.dataBinder.compilerAttrRender(a,b)}},createCompilerTextRender:function(a,b){var c;return function(){if(!document.body.contains(a[0]))return a[0];var d=jstack.dataBinder.getValueEval(a[0],b);c!==d&&(c=d,a.commentChildren().remove(),a.after(d))}},compilerText:function(){if(this.textContent){var a=this.textContent.toString(),b=jstack.dataBinder.textTokenizer(a);if(b!==!1){for(var c=$(this),d=[],e=c,f=0,g=b.length;f<g;f++){var h=b[f];if("{{"==h.substr(0,2)){var i=$("<!--j:text-->"),j=$("<!--/j:text-->");i.insertAfter(e),j.insertAfter(i),e=j,h=h.substr(2,h.length-4),d.push(jstack.dataBinder.createCompilerTextRender(i,h))}else h=document.createTextNode(h),e.after(h),e=h}return c.remove(),d}}},textTokenizer:function(a){var b=/\{\{((?:.|\n)+?)\}\}/g;if(!b.test(a))return!1;for(var c,d,e=[],f=b.lastIndex=0;c=b.exec(a);){d=c.index,d>f&&e.push(a.slice(f,d));var g=c[1].trim();e.push("{{"+g+"}}"),f=d+c[0].length}return f<a.length&&e.push(a.slice(f)),e}};var b=new a;return b.eventListener(),b}(),$.on("reset","form",function(){$(this).populateReset()}),function(a,b){var c=function(a,b){var c=a[b];return c!==Object[b]&&c!==Object.__proto__[b]&&c!==Array[b]&&c!==Array.__proto__[b]},d=function(b){for(var c=[],d=a.param(b).split("&"),e=0;e<d.length;e++){var f=d[e].split("="),g=null!==f[1]?decodeURIComponent(f[1]):"";c.push([decodeURIComponent(f[0]),g])}return c},e=function(b,c,d,f){d||(d="");for(var g in b)if(b.hasOwnProperty(g)){var h=d+g,i=b[g];if(i instanceof FileList){if(1==i.length)c[h]=i[0];else{c[h]=[];for(var j=0;j<i.length;j++)c[h].push(i[j])}delete b[g]}else i instanceof a?b[g]=i.jsonml():i instanceof HTMLCollection||i instanceof HTMLElement?b[g]=a(i).jsonml():"object"==typeof i&&e(i,c,h+"_",f+1)}},f=function(a){for(var b in a)c(a,b)&&("undefined"==typeof a[b]||null===a[b]?a[b]="":"object"==typeof a[b]&&(a[b]=f(a[b])));return a};b.ajax=function(){var b,c={};if(2==arguments.length?(b=arguments[1]||{},b.url=arguments[0]):b=arguments[0],b.data&&e(b.data,c),!a.isEmptyObject(c)){for(var g,h=new FormData,i=d(b.data),j=0;j<i.length;j++)h.append(i[j][0],i[j][1]);for(var k in c)if(c.hasOwnProperty(k)){var l=c[k];if(l instanceof Array)for(var j=0;j<l.length;j++)"undefined"!=typeof l[j]&&(h.append(k+"[]",l[j]),g=!0);else"undefined"!=typeof l&&(h.append(k,l),g=!0)}g&&(b.type="POST",b.processData=!1,b.contentType=!1,b.data=h)}return b.data=f(b.data),a.ajax(b)},b.post=function(a,c,d,e){return b.ajax({type:"POST",url:a,data:c,success:d,dataType:e})}}(jQuery,jstack),function(){jstack.mvc=function(a){"string"==typeof arguments[0]&&(a={view:arguments[0],controller:"string"==typeof arguments[1]?arguments[1]:arguments[0]}),a.controller||(a.controller=a.view),a.target||(a.target=jstack.config.defaultTarget);var b=$(a.target),c=(a.controller,jstack.config.controllersPath+a.controller),d=$.Deferred();jstack.controllers[a.controller]?d.resolve():$js.onExists(c,d.resolve,d.resolve);var e=jstack.getTemplate(a.view+".jml"),f=$.Deferred();return d.then(function(){var c=jstack.controller(a.controller,b);$.when(e,c).then(function(a,c){var d=a[0];c.render(d),f.resolve(b,c)})}),f.promise()};var a=function(a){if("string"==typeof arguments[0]){var b='[j-view="'+arguments[0]+'"]';a="object"==typeof arguments[1]?$(arguments[1]).find(b):$(b)}a=$(a);var c=a.data("jViewReady");return c||(c=$.Deferred(),a.data("jViewReady",c)),c};jstack.viewReady=function(b){return a(b).promise()},$.on("j:load","[j-view]:not([j-view-loaded])",function(){this.setAttribute("j-view-loaded","true");var b,c=this.getAttribute("j-view");b=this.hasAttribute("j-controller")?this.getAttribute("j-controller"):c;var d=a(this),e=jstack.mvc({view:c,controller:b,target:this});e.then(function(){d.resolve()})})}(),function(){jstack.app=function(a,b){b||(b=a[0].getAttribute("j-app")),jstack.config.templatesPath+=b+"/",jstack.config.controllersPath+=b+"/",jstack.route("*",function(a){return a=jstack.url.getPath(a),jstack.mvc(a)})};var a=$("[j-app]");a.length&&jstack.app(a)}();